<!DOCTYPE html />

<html>
<head>
	<title>IndexController.cs</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link href="../nocco.css" rel="stylesheet" media="all" type="text/css" />
	<script src="../prettify.js" type="text/javascript"></script>
</head>
<body onload="prettyPrint()">
	<div id="container">
		<div id="background"></div>
		<table cellpadding="0" cellspacing="0">
			<thead>
				<tr>
					<th class="docs">
						<h1>IndexController.cs</h1>
					</th>
					<th class="code"></th>
				</tr>
			</thead>
			<tbody>
					<tr id="section_1">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_1">&#182;</a>
							</div>
							
						</td>
						<td class="code">
							<pre><code class='prettyprint'>using System;
using System.Configuration;
using System.Web.Mvc;
using Groupdocs.Sdk;
using Groupdocs.Api;
using System.IO;
using System.Linq;

namespace SamplesApp.Controllers
{
    public class SamplesController : Controller
    {
</code></pre>
						</td>
					</tr>
					<tr id="section_2">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_2">&#182;</a>
							</div>
							<h3>Default Index controller</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Index(String result)
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_3">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_3">&#182;</a>
							</div>
							<p>Pass GUID of the document as model.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            return View(&quot;Index&quot;, null, result);
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_4">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_4">&#182;</a>
							</div>
							<h3>Docs controller</h3>

<p>public ActionResult Docs(String result)
{
Pass GUID of the document as model.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>
</code></pre>
						</td>
					</tr>
					<tr id="section_5">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_5">&#182;</a>
							</div>
							<p>return View("/samples/docs/controllers/indexcontroller.html");
}</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>
</code></pre>
						</td>
					</tr>
					<tr id="section_6">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_6">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>Signer object</b> to be authorized at GroupDocs and how to get GroupDocs user infromation using .NET SDK</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample01()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_7">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_7">&#182;</a>
							</div>
							<p>Check is data posted    </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_8">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_8">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.UserInfoResult userInfo = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_9">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_9">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_10">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_10">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_11">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_11">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample01&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_12">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_12">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_13">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_13">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_14">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_14">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_15">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_15">&#182;</a>
							</div>
							<p>Get info about user account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    userInfo = service.GetUserProfile();
</code></pre>
						</td>
					</tr>
					<tr id="section_16">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_16">&#182;</a>
							</div>
							<h3>Put user info to Hashtable</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;FirstName&quot;, userInfo.User.FirstName);
                    result.Add(&quot;LastName&quot;, userInfo.User.LastName);
                    result.Add(&quot;NickName&quot;, userInfo.User.NickName);
                    result.Add(&quot;PrimaryEmail&quot;, userInfo.User.PrimaryEmail);
</code></pre>
						</td>
					</tr>
					<tr id="section_17">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_17">&#182;</a>
							</div>
							<p>Return Hashtable with results to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample01&quot;, null, result);
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_18">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_18">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample01&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_19">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_19">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>GetFileSystemEntities</b> method from Storage  API  to list files within GroupDocs Storage</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample02()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_20">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_20">&#182;</a>
							</div>
							<p>Check is data posted   </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_21">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_21">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.ListEntitiesResult files = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_22">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_22">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_23">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_23">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_24">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_24">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample02&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_25">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_25">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_26">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_26">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_27">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_27">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_28">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_28">&#182;</a>
							</div>
							<p>Get all files and folders from account. </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    files = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, true, null, null);
</code></pre>
						</td>
					</tr>
					<tr id="section_29">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_29">&#182;</a>
							</div>
							<p>Check request result</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (files.Files != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_30">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_30">&#182;</a>
							</div>
							<p>Create empty variable for results</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String name = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_31">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_31">&#182;</a>
							</div>
							<p>Create TagBuilder for adding HTML tag to the string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        TagBuilder tag = new TagBuilder(&quot;br&quot;);

</code></pre>
						</td>
					</tr>
					<tr id="section_32">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_32">&#182;</a>
							</div>
							<p>Obtaining all files names</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; files.Files.Length; i++)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_33">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_33">&#182;</a>
							</div>
							<p>Creating a string with files names and HTML tag</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            name += files.Files[i].Name + tag;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_34">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_34">&#182;</a>
							</div>
							<p>Encoding string to the HTML string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        MvcHtmlString names = MvcHtmlString.Create(name);
</code></pre>
						</td>
					</tr>
					<tr id="section_35">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_35">&#182;</a>
							</div>
							<p>Put results to result list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;Names&quot;, names);
</code></pre>
						</td>
					</tr>
					<tr id="section_36">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_36">&#182;</a>
							</div>
							<p>Transfer result to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        return View(&quot;Sample02&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_37">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_37">&#182;</a>
							</div>
							<p>If files in request result's is empty return error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        message = &quot;GetFileSystemEntities returns error&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample02&quot;, null, result);
                    }
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_38">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_38">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample02&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_39">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_39">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>UploadFile</b> method from Storage Api to upload file to GroupDocs Storage </i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample03()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_40">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_40">&#182;</a>
							</div>
							<p>Check is data posted   </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_41">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_41">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String url = Request.Form[&quot;url&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;url&quot;, url);
                Groupdocs.Api.Contract.UploadRequestResult upload = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_42">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_42">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null )
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_43">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_43">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_44">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_44">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample03&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_45">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_45">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
                    result.Add(&quot;basePath&quot;, basePath);
                    if (url == &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_46">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_46">&#182;</a>
							</div>
							<h3>Upload file</h3>

<p>Get tag's names from form</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        foreach (string inputTagName in Request.Files)
                        {
                            var file = Request.Files[inputTagName];
</code></pre>
						</td>
					</tr>
					<tr id="section_47">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_47">&#182;</a>
							</div>
							<p>Check that file is not fake.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            if (file.ContentLength &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_48">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_48">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_49">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_49">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                if (upload.Guid != null)
                                {
</code></pre>
						</td>
					</tr>
					<tr id="section_50">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_50">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                    result.Add(&quot;guid&quot;, upload.Guid);

                                }
</code></pre>
						</td>
					</tr>
					<tr id="section_51">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_51">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                else
                                {
                                    message = &quot;UploadFile returns error&quot;;
                                    result.Add(&quot;error&quot;, message);
                                    return View(&quot;Sample03&quot;, null, result);
                                }
                            }
                        }
                    }
                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_52">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_52">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_53">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_53">&#182;</a>
							</div>
							<p>If file uploaded return his GuId to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;guid&quot;, guid);
                            return View(&quot;Sample03&quot;, null, result);
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_54">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_54">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample03&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_55">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_55">&#182;</a>
							</div>
							<p>Redirect to viewer with received GUID.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample03&quot;, null, result);
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_56">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_56">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample03&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_57">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_57">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>DownloadFile</b> method from Storage Api to download a file from GroupDocs Storage</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample04()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_58">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_58">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_59">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_59">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_60">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_60">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || fileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_61">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_61">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample04&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_62">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_62">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_63">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_63">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_64">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_64">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_65">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_65">&#182;</a>
							</div>
							<h3>Get all files and folders from account.</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.ListEntitiesResult files = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, true, null, null);
</code></pre>
						</td>
					</tr>
					<tr id="section_66">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_66">&#182;</a>
							</div>
							<p>Create empty variable for file name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String name = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_67">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_67">&#182;</a>
							</div>
							<p>Check is files is not null</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (files.Files != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_68">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_68">&#182;</a>
							</div>
							<p>Obtaining file name for entered file Id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; files.Files.Length; i++)
                        {
                            if (files.Files[i].Guid == fileId)
                            {
                                name = files.Files[i].Name;
                            }

                        }
                    }
                    
</code></pre>
						</td>
					</tr>
					<tr id="section_69">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_69">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String LocalPath = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_70">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_70">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    bool file = service.DownloadFile(fileId, LocalPath + name);
</code></pre>
						</td>
					</tr>
					<tr id="section_71">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_71">&#182;</a>
							</div>
							<p>If file downloaded successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (file != false)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_72">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_72">&#182;</a>
							</div>
							<p>Put file info to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;path&quot;, LocalPath);
                        result.Add(&quot;name&quot;, name);
</code></pre>
						</td>
					</tr>
					<tr id="section_73">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_73">&#182;</a>
							</div>
							<p>Return to the template </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        return View(&quot;Sample04&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_74">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_74">&#182;</a>
							</div>
							<p>If file download failed</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_75">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_75">&#182;</a>
							</div>
							<p>Return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        message = &quot;DownloadFile returns error&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample04&quot;, null, result);
                    }
                    
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_76">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_76">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample04&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_77">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_77">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>MoveFile/copyFile</b> method's from Storage Api to copy/move a file in GroupDocs Storage </i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample05()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_78">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_78">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_79">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_79">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;srcPath&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String destPath = Request.Form[&quot;destPath&quot;];
                String action = Request.Form[&quot;copy&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_80">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_80">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                result.Add(&quot;destPath&quot;, destPath);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_81">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_81">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == &quot;&quot; || private_key == &quot;&quot; || destPath == &quot;&quot;)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_82">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_82">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample05&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_83">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_83">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_84">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_84">&#182;</a>
							</div>
							<p>Create empty variable for file name and id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String name = null;
                    decimal id = new decimal();
</code></pre>
						</td>
					</tr>
					<tr id="section_85">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_85">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_86">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_86">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_87">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_87">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_88">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_88">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            id = upload.Id;
                            name = upload.AdjustedName;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_89">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_89">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample05&quot;, null, result);
                        }
                          
                     }
</code></pre>
						</td>
					</tr>
					<tr id="section_90">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_90">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_91">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_91">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_92">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_92">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_93">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_93">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        id = storageInfo.Files[i].Id;
                                        name = storageInfo.Files[i].Name;
                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample05&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_94">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_94">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample05&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_95">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_95">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_96">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_96">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_97">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_97">&#182;</a>
							</div>
							<p>Get file id and name by entered file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == fileId)
                                {
                                    id = storageInfo.Files[i].Id;
                                    name = storageInfo.Files[i].Name;
                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample05&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_98">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_98">&#182;</a>
							</div>
							<p>Check is entered file GuId exists</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (name == null || id == 0)
                    {
                        result.Add(&quot;error&quot;, &quot;File was not found&quot;);
                        return View(&quot;Sample05&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_99">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_99">&#182;</a>
							</div>
							<p>Create path to where copy/move file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String path = destPath + &quot;/&quot; + name;
                    Groupdocs.Api.Contract.FileMoveResponse transfer = new Groupdocs.Api.Contract.FileMoveResponse();
</code></pre>
						</td>
					</tr>
					<tr id="section_100">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_100">&#182;</a>
							</div>
							<p>Copy file if user choose copy</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (action == &quot;Copy&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_101">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_101">&#182;</a>
							</div>
							<p>Create empty Overide mode</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Common.OverrideMode overide = new Groupdocs.Common.OverrideMode();
</code></pre>
						</td>
					</tr>
					<tr id="section_102">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_102">&#182;</a>
							</div>
							<p>Make request to the Api to copy file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        transfer = service.CopyFile(id, path, overide);
</code></pre>
						</td>
					</tr>
					<tr id="section_103">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_103">&#182;</a>
							</div>
							<p>Put message to result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;button&quot;, &quot;Copied&quot;);

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_104">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_104">&#182;</a>
							</div>
							<p>If user choose Move file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        Groupdocs.Common.OverrideMode overide = new Groupdocs.Common.OverrideMode();
                        transfer = service.MoveFile(id, path, overide);
                        result.Add(&quot;button&quot;, &quot;Moved&quot;);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_105">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_105">&#182;</a>
							</div>
							<p>Check is copy/move is successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (transfer.Status.Equals(&quot;Ok&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_106">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_106">&#182;</a>
							</div>
							<p>If successful put path to the copy/moved file to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;path&quot;, path);
                    }
                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_107">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_107">&#182;</a>
							</div>
							<p>If failed put error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;error&quot;, transfer.ErrorMessage);
                    }

                }
</code></pre>
						</td>
					</tr>
					<tr id="section_108">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_108">&#182;</a>
							</div>
							<p>Return results to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                return View(&quot;Sample05&quot;, null, result);         
            

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_109">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_109">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample05&quot;);
            }
                        
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_110">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_110">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>SignDocument</b> method from Signature Api to Sign Document and upload it to user storage</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample06()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_111">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_111">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_112">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_112">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                var documetToSign = Request.Files[&quot;fi_document&quot;];
                var signature = Request.Files[&quot;fi_signature&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.UploadRequestResult upload = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_113">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_113">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || Request.Files.Count == 0)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_114">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_114">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample06&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_115">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_115">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_116">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_116">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_117">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_117">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_118">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_118">&#182;</a>
							</div>
							<p>Upload document for sign to the storage</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    upload = service.UploadFile(documetToSign.FileName, String.Empty, documetToSign.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_119">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_119">&#182;</a>
							</div>
							<p>If file uploaded successfuly</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (upload.Guid != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_120">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_120">&#182;</a>
							</div>
							<p>Read binary data from InputStream</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        System.IO.BinaryReader reader = new System.IO.BinaryReader(signature.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_121">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_121">&#182;</a>
							</div>
							<p>Convert to byte array</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        byte[] bytedata = reader.ReadBytes((Int32)signature.ContentLength);
</code></pre>
						</td>
					</tr>
					<tr id="section_122">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_122">&#182;</a>
							</div>
							<p>Convert from byte array to the Base64 string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String data = &quot;data:image/gif;base64,&quot; + Convert.ToBase64String(bytedata);
</code></pre>
						</td>
					</tr>
					<tr id="section_123">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_123">&#182;</a>
							</div>
							<h3>Create Signer settings object</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.SignatureSignDocumentSignerSettings signerSettings = new Groupdocs.Api.Contract.SignatureSignDocumentSignerSettings();
</code></pre>
						</td>
					</tr>
					<tr id="section_124">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_124">&#182;</a>
							</div>
							<p>Activate signature place</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.PlaceSignatureOn = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_125">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_125">&#182;</a>
							</div>
							<p>Set signer name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Name = &quot;GroupDocs&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_126">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_126">&#182;</a>
							</div>
							<p>Transfer signature image</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Data =  data;
</code></pre>
						</td>
					</tr>
					<tr id="section_127">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_127">&#182;</a>
							</div>
							<p>Set Heifht for signature</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Height = new decimal(40d);
</code></pre>
						</td>
					</tr>
					<tr id="section_128">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_128">&#182;</a>
							</div>
							<p>Set width for signature</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Width = new decimal(100d);
</code></pre>
						</td>
					</tr>
					<tr id="section_129">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_129">&#182;</a>
							</div>
							<p>Set top coordinate for signature</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Top = new decimal(0.83319);
</code></pre>
						</td>
					</tr>
					<tr id="section_130">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_130">&#182;</a>
							</div>
							<p>Set left coordinate for signature</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        signerSettings.Left = new decimal(0.72171);
</code></pre>
						</td>
					</tr>
					<tr id="section_131">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_131">&#182;</a>
							</div>
							<p>Make request to sig document</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.SignatureSignDocumentResponse sign = service.SignDocument(upload.Guid, signerSettings);
</code></pre>
						</td>
					</tr>
					<tr id="section_132">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_132">&#182;</a>
							</div>
							<p>If document signed  </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (sign.Status.Equals(&quot;Ok&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_133">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_133">&#182;</a>
							</div>
							<p>Put to the result's list received GUID.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;guid&quot;, sign.Result.DocumentId);
                            
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_134">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_134">&#182;</a>
							</div>
							<p>If request returns error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_135">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_135">&#182;</a>
							</div>
							<p>Redirect to viewer with error.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            message = sign.ErrorMessage;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample06&quot;, null, result);
                        }
                    }

                }
</code></pre>
						</td>
					</tr>
					<tr id="section_136">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_136">&#182;</a>
							</div>
							<p>Redirect to viewer with received result's.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                return View(&quot;Sample06&quot;, null, result);
                
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_137">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_137">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample06&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_138">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_138">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>GetFileSystemEntities</b> method from Storage Api to create a list of thumbnails for a document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample07()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_139">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_139">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_140">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_140">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.ListEntitiesResult files = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_141">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_141">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_142">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_142">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample07&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_143">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_143">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_144">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_144">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_145">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_145">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_146">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_146">&#182;</a>
							</div>
							<h3>Get all files and folders from account. Set last argument to True to get thumbnails.</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    files = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
</code></pre>
						</td>
					</tr>
					<tr id="section_147">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_147">&#182;</a>
							</div>
							<p>If request was successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (files.Files != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_148">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_148">&#182;</a>
							</div>
							<p>Create empty variables for file name and image tag</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String name = &quot;&quot;;
                        String image = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_149">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_149">&#182;</a>
							</div>
							<p>Create tag builders for img and br tag's</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        TagBuilder tagImg = new TagBuilder(&quot;img&quot;);
                        TagBuilder tagBr = new TagBuilder(&quot;br&quot;);
</code></pre>
						</td>
					</tr>
					<tr id="section_150">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_150">&#182;</a>
							</div>
							<p>Check is file have thumbnail</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; files.Files.Length; i++)
                        {
                            if (files.Files[i].Thumbnail != null)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_151">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_151">&#182;</a>
							</div>
							<p>Delete extension from file name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                int nameLength = files.Files[i].Name.Length;
                                name = files.Files[i].Name.Substring(0, nameLength - 4);
</code></pre>
						</td>
					</tr>
					<tr id="section_152">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_152">&#182;</a>
							</div>
							<p>Set local path for thumbnails</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                String LocalPath = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot; + name + &quot;.jpg&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_153">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_153">&#182;</a>
							</div>
							<p>Convert thumbnail Base64 data to Base64 string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                String data = Convert.ToBase64String(files.Files[i].Thumbnail);
</code></pre>
						</td>
					</tr>
					<tr id="section_154">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_154">&#182;</a>
							</div>
							<p>Convert from Base64 string to byte array</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                byte[] imageBytes = Convert.FromBase64String(data);
</code></pre>
						</td>
					</tr>
					<tr id="section_155">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_155">&#182;</a>
							</div>
							<p>Create Memory stream from byte array</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                System.IO.MemoryStream ms = new System.IO.MemoryStream(imageBytes, 0, imageBytes.Length);
</code></pre>
						</td>
					</tr>
					<tr id="section_156">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_156">&#182;</a>
							</div>
							<p>Write memory stream to the file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                ms.Write(imageBytes, 0, imageBytes.Length);
</code></pre>
						</td>
					</tr>
					<tr id="section_157">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_157">&#182;</a>
							</div>
							<p>Create image file from stream</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                System.Drawing.Image img = System.Drawing.Image.FromStream(ms, true);
</code></pre>
						</td>
					</tr>
					<tr id="section_158">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_158">&#182;</a>
							</div>
							<p>Save image file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                img.Save(LocalPath, System.Drawing.Imaging.ImageFormat.Jpeg);
                                img.Dispose();
                                ms.Close();
</code></pre>
						</td>
					</tr>
					<tr id="section_159">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_159">&#182;</a>
							</div>
							<h3>Create HTML string with images and names</h3>

<p>Set attributes for img tag</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                tagImg.MergeAttribute(&quot;src&quot;, &quot;/../downloads/&quot; + name + &quot;.jpg&quot;, true);
                                tagImg.MergeAttribute(&quot;width&quot;, &quot;40px&quot;);
                                tagImg.MergeAttribute(&quot;height&quot;, &quot;40px&quot;);
</code></pre>
						</td>
					</tr>
					<tr id="section_160">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_160">&#182;</a>
							</div>
							<p>Create string from img, file name and br tag</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                image += tagImg.ToString(TagRenderMode.SelfClosing) + files.Files[i].Name + tagBr;
                                name = null;                              
                            }

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_161">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_161">&#182;</a>
							</div>
							<p>Encode string to HTML string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        MvcHtmlString images = MvcHtmlString.Create(image);
                        result.Add(&quot;images&quot;, images);
                        return View(&quot;Sample07&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_162">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_162">&#182;</a>
							</div>
							<p>If request returns error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_163">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_163">&#182;</a>
							</div>
							<p>Redirect to viewer with error.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        message = &quot;GetFileSystemEntities returns error&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample07&quot;, null, result);
                    }
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_164">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_164">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample07&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_165">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_165">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>GetDocumentPagesImageUrls</b> method from Doc Api to return a URL representing a single page of a Document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample08()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_166">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_166">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_167">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_167">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String fileGuId = &quot;&quot;;
                String pageNumber = Request.Form[&quot;pageNumber&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;pageNumber&quot;, pageNumber);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_168">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_168">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || fileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_169">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_169">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample08&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_170">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_170">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_171">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_171">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_172">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_172">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_173">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_173">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_174">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_174">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_175">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_175">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample08&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_176">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_176">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_177">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_177">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_178">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_178">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_179">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_179">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileGuId = storageInfo.Files[i].Guid;
                                        
                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample08&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_180">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_180">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample08&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_181">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_181">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_182">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_182">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_183">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_183">&#182;</a>
							</div>
							<p>Get file id and name by entered file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == fileId)
                                {
                                    fileGuId = storageInfo.Files[i].Guid;
                                    
                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample08&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_184">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_184">&#182;</a>
							</div>
							<p>Make request to get page image url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String[] pageUrl = service.GetDocumentPagesImageUrls(fileGuId, &quot;600x750&quot;, String.Empty, Int32.Parse(pageNumber), 1, 100, false);
</code></pre>
						</td>
					</tr>
					<tr id="section_185">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_185">&#182;</a>
							</div>
							<p>Check if url is not null</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (pageUrl != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_186">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_186">&#182;</a>
							</div>
							<p>Redirect to template with receive URL</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;url&quot;, pageUrl[0]);
                        return View(&quot;Sample08&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_187">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_187">&#182;</a>
							</div>
							<p>Else return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        message = &quot;Something is wrong with your data&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample08&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_188">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_188">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample08&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_189">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_189">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>GuId</b> of file to generate an embedded Viewer URL for a Document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample09()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_190">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_190">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_191">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_191">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String width = Request.Form[&quot;width&quot;];
                String height = Request.Form[&quot;height&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String iframeType = Request.Form[&quot;iframeType&quot;];
                String fileGuId = &quot;&quot;;
                result.Add(&quot;width&quot;, width);
                result.Add(&quot;height&quot;, height);
                result.Add(&quot;iframeType&quot;, iframeType);
                String message = null;
                if (userId == null || private_key == null || fileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_192">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_192">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample09&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_193">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_193">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_194">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_194">&#182;</a>
							</div>
							<p>If entered file id is null
Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_195">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_195">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_196">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_196">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_197">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_197">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_198">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_198">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample09&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_199">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_199">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_200">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_200">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_201">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_201">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_202">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_202">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileGuId = storageInfo.Files[i].Guid;

                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample09&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_203">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_203">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample09&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_204">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_204">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_205">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_205">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_206">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_206">&#182;</a>
							</div>
							<p>Get file id and name by entered file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == fileId)
                                {
                                    fileGuId = storageInfo.Files[i].Guid;

                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample09&quot;, null, result);
                        }
                    }
                    String iframe = &quot;&quot;;
                    result.Add(&quot;fileId&quot;, fileGuId);
</code></pre>
						</td>
					</tr>
					<tr id="section_207">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_207">&#182;</a>
							</div>
							<p>Chek what type of iframe user select</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (iframeType.Equals(&quot;viewer&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_208">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_208">&#182;</a>
							</div>
							<p>Generate Embed viewer url with entered file id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (basePath.Equals(&quot;https://api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://apps.groupdocs.com/document-viewer/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://dev-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://dev-apps.groupdocs.com/document-viewer/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://stage-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://stage-apps.groupdocs.com/document-viewer/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://realtime-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://realtime-apps.groupdocs.com/document-viewer/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                    }
                    else if (iframeType.Equals(&quot;annotation&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_209">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_209">&#182;</a>
							</div>
							<p>Generate Embed annotation url with entered file id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (basePath.Equals(&quot;https://api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://apps.groupdocs.com/document-annotation2/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://dev-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://dev-apps.groupdocs.com/document-annotation2/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://stage-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://stage-apps.groupdocs.com/document-annotation2/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                        if (basePath.Equals(&quot;https://realtime-api.groupdocs.com/v2.0&quot;))
                        {
                            iframe = &quot;https://realtime-apps.groupdocs.com/document-annotation2/embed/&quot; + fileGuId + &quot; frameborder=0 width=&quot; + width + &quot; height=&quot; + height;
                        }
                    }
                    result.Add(&quot;iframe&quot;, iframe);
                    return View(&quot;Sample09&quot;, null, result);



                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_210">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_210">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample09&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_211">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_211">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>ShareDocument</b> method from Doc Api to share a document to other users</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample10()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_212">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_212">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_213">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_213">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String email = Request.Form[&quot;email&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_214">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_214">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                result.Add(&quot;email&quot;, email);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_215">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_215">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || email == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_216">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_216">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample10&quot;, null, result);
                }
                else
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_217">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_217">&#182;</a>
							</div>
							<p>Create string array with emails</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String[] sharers = new String[1];
                    sharers[0] = email;
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_218">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_218">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
                    decimal id = new decimal();
</code></pre>
						</td>
					</tr>
					<tr id="section_219">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_219">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_220">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_220">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_221">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_221">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_222">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_222">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            id = upload.Id;
                           

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_223">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_223">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample10&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_224">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_224">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_225">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_225">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_226">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_226">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_227">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_227">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        id = storageInfo.Files[i].Id;
                                       
                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample10&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_228">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_228">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample10&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_229">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_229">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_230">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_230">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_231">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_231">&#182;</a>
							</div>
							<p>Get file id and name by entered file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == fileId)
                                {
                                    id = storageInfo.Files[i].Id;
                                    
                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample10&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_232">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_232">&#182;</a>
							</div>
							<p>Make request to share document</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.SharedUsersResult share = service.ShareDocument(id, sharers);
</code></pre>
						</td>
					</tr>
					<tr id="section_233">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_233">&#182;</a>
							</div>
							<p>Check is request return data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (share != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_234">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_234">&#182;</a>
							</div>
							<p>Return primary email to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;sharer&quot;, share.SharedUsers[0].PrimaryEmail);
                        return View(&quot;Sample10&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_235">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_235">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        message = &quot;Something is wrong with your data&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample10&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_236">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_236">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample10&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_237">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_237">&#182;</a>
							</div>
							<h3><i>This sample will show how programmatically create and post an annotation into document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample11()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_238">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_238">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_239">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_239">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String fileGuId = &quot;&quot;;
                String annotation_type = Request.Form[&quot;annotation_type&quot;];
                String box_x = Request.Form[&quot;box_x&quot;];
                String box_y = Request.Form[&quot;box_y&quot;];
                String box_width = Request.Form[&quot;box_width&quot;];
                String box_height = Request.Form[&quot;box_height&quot;];
                String annotationPosition_x = Request.Form[&quot;annotationPosition_x&quot;];
                String annotationPosition_y = Request.Form[&quot;annotationPosition_y&quot;];
                String range_position = Request.Form[&quot;range_position&quot;];
                String range_length = Request.Form[&quot;range_length&quot;];
                String text = Request.Form[&quot;text&quot;];
             
</code></pre>
						</td>
					</tr>
					<tr id="section_240">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_240">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                result.Add(&quot;type&quot;, annotation_type);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_241">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_241">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || annotation_type == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_242">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_242">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample11&quot;, null, result);
                }
                else
                {

                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_243">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_243">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_244">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_244">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_245">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_245">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_246">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_246">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_247">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_247">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_248">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_248">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample11&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_249">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_249">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_250">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_250">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_251">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_251">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_252">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_252">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileGuId = storageInfo.Files[i].Guid;

                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample11&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_253">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_253">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample11&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_254">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_254">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_255">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_255">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_256">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_256">&#182;</a>
							</div>
							<p>Get file id and name by entered file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == fileId)
                                {
                                    fileGuId = storageInfo.Files[i].Guid;

                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample11&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_257">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_257">&#182;</a>
							</div>
							<h3>Create AnnotationType</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   Groupdocs.Common.AnnotationType type = new Groupdocs.Common.AnnotationType();
</code></pre>
						</td>
					</tr>
					<tr id="section_258">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_258">&#182;</a>
							</div>
							<p>Create Rectangle object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   Groupdocs.Api.Contract.Rectangle rectangle = new Groupdocs.Api.Contract.Rectangle();
</code></pre>
						</td>
					</tr>
					<tr id="section_259">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_259">&#182;</a>
							</div>
							<p>Create Point object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   Groupdocs.Api.Contract.Data.Point point = new Groupdocs.Api.Contract.Data.Point();
</code></pre>
						</td>
					</tr>
					<tr id="section_260">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_260">&#182;</a>
							</div>
							<p>Create Range object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   Groupdocs.Api.Contract.Range range = new Groupdocs.Api.Contract.Range();
</code></pre>
						</td>
					</tr>
					<tr id="section_261">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_261">&#182;</a>
							</div>
							<p>Set annotation parameters if annotation type is point</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   if (annotation_type == &quot;point&quot;) 
                   {
                       type = Groupdocs.Common.AnnotationType.Point;
                       rectangle.X = float.Parse(box_x);
                       rectangle.Y = float.Parse(box_y);
                       rectangle.Width = 0;
                       rectangle.Height = 0;
                       point.X = 0;
                       point.Y = 0;

                   }
</code></pre>
						</td>
					</tr>
					<tr id="section_262">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_262">&#182;</a>
							</div>
							<p>Set annotation parameters if annotation type is text</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   else if (annotation_type == &quot;text&quot;)
                   {
                       type = Groupdocs.Common.AnnotationType.Text;
                       point.X = double.Parse(annotationPosition_x);
                       point.Y = double.Parse(annotationPosition_y);
                       range.Length = Int32.Parse(range_length);
                       range.Position = Int32.Parse(range_position);
                   }
</code></pre>
						</td>
					</tr>
					<tr id="section_263">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_263">&#182;</a>
							</div>
							<p>Set annotation parameters if annotation type is area</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   else
                   {
                       type = Groupdocs.Common.AnnotationType.Area;
                       point.X = 0;
                       point.Y = 0;
                       rectangle.X = float.Parse(box_x);
                       rectangle.Y = float.Parse(box_y);
                       rectangle.Width = float.Parse(box_width);
                       rectangle.Height = float.Parse(box_height);
                   }
</code></pre>
						</td>
					</tr>
					<tr id="section_264">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_264">&#182;</a>
							</div>
							<h3>Make request to Api to create Annotation</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   Groupdocs.Api.Contract.Annotation.CreateAnnotationResult annotation = service.CreateAnnotation(fileGuId, type, rectangle, point, range, null, null);
</code></pre>
						</td>
					</tr>
					<tr id="section_265">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_265">&#182;</a>
							</div>
							<p>Check if GuId of document with added annotation is not empty</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (annotation.DocumentGuid != &quot;&quot;)
                   {
</code></pre>
						</td>
					</tr>
					<tr id="section_266">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_266">&#182;</a>
							</div>
							<p>Set data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                       result.Add(&quot;guid&quot;, annotation.DocumentGuid);
                       return View(&quot;Sample11&quot;, null, result);
                   }
</code></pre>
						</td>
					</tr>
					<tr id="section_267">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_267">&#182;</a>
							</div>
							<p>If GuId is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   else
                   {
                       result.Add(&quot;error&quot;, &quot;Annotation is fail&quot;);
                       return View(&quot;Sample11&quot;, null, result);
                   }
                    
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_268">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_268">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample11&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_269">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_269">&#182;</a>
							</div>
							<h3><i>This sample will show how to list all annotations from document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample12()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_270">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_270">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_271">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_271">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_272">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_272">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_273">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_273">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || fileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_274">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_274">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample12&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_275">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_275">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_276">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_276">&#182;</a>
							</div>
							<p>Get all annotations from document</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.Annotation.ListAnnotationsResult annotations = service.ListAnnotations(fileId);
</code></pre>
						</td>
					</tr>
					<tr id="section_277">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_277">&#182;</a>
							</div>
							<p>If annotations wasn't found return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (annotations.Annotations.Length == 0)
                    {

                        message = &quot;File GuId you are entered is wrong&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample12&quot;, null, result);

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_278">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_278">&#182;</a>
							</div>
							<p>Create String variables for creating HTMl div with results</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String annotation = &quot;&quot;;
                    String replies = &quot;&quot;;
                    String block = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_279">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_279">&#182;</a>
							</div>
							<p>Get annotations data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    for (int i = 0; i &lt; annotations.Annotations.Length; i++)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_280">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_280">&#182;</a>
							</div>
							<p>Get Annotation access and type</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        annotation = &quot;Access: &quot; + annotations.Annotations[i].Access + &quot;&lt;br /&gt;&quot; + &quot;Type: &quot; +
                                            annotations.Annotations[i].Type + &quot;&lt;br /&gt;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_281">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_281">&#182;</a>
							</div>
							<p>Check if Annotation have replies</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (annotations.Annotations[i].Replies.Length == 0)
                        {
                            replies = &quot;&quot;;
                           
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_282">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_282">&#182;</a>
							</div>
							<p>Get all replies from annotation</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int n = i; n &lt; annotations.Annotations[i].Replies.Length; n++)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_283">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_283">&#182;</a>
							</div>
							<p>Get replies data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                replies += &quot;&lt;li&gt;&quot; + annotations.Annotations[i].Replies[n].UserName +
                                                    &quot; : &quot; + annotations.Annotations[i].Replies[n].Message + &quot;&lt;/li&gt;&quot;;
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_284">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_284">&#182;</a>
							</div>
							<p>Create block with annotation data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        block += &quot;&lt;div&gt;&quot; + annotation + &quot;Replies: &quot; + &quot;&lt;ul&gt;&quot; + replies + &quot;&lt;/ul&gt;&quot; + &quot;&lt;hr /&gt;&quot; + &quot;&lt;/div&gt;&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_285">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_285">&#182;</a>
							</div>
							<p>Convert from string to HTML string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    MvcHtmlString div = MvcHtmlString.Create(block);
</code></pre>
						</td>
					</tr>
					<tr id="section_286">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_286">&#182;</a>
							</div>
							<p>Set data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;div&quot;, div);
                    return View(&quot;Sample12&quot;, null, result);
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_287">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_287">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample12&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_288">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_288">&#182;</a>
							</div>
							<h3><i>This sample will show how to add collaborator to doc with annotations</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample13()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_289">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_289">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_290">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_290">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String email = Request.Form[&quot;email&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String fileGuId = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_291">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_291">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                
                result.Add(&quot;email&quot;, email);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_292">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_292">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || email == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_293">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_293">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample13&quot;, null, result);
                }
                else
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_294">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_294">&#182;</a>
							</div>
							<p>Create string array with emails</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String[] collaborators = new String[1];
                    collaborators[0] = email;
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_295">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_295">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_296">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_296">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_297">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_297">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_298">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_298">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_299">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_299">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_300">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_300">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample13&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_301">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_301">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_302">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_302">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_303">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_303">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_304">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_304">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileGuId = storageInfo.Files[i].Guid;

                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample13&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_305">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_305">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample13&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_306">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_306">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
                        fileGuId = fileId;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_307">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_307">&#182;</a>
							</div>
							<p>Make request to set annotation collaborators</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.Annotation.SetCollaboratorsResult collaborate = service.SetAnnotationCollaborators(fileGuId, collaborators);
</code></pre>
						</td>
					</tr>
					<tr id="section_308">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_308">&#182;</a>
							</div>
							<p>Check is request return data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (collaborate != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_309">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_309">&#182;</a>
							</div>
							<p>Return primary email to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;collaborator&quot;, collaborate.Collaborators[0].PrimaryEmail);
                        result.Add(&quot;fileId&quot;, fileGuId);
                        return View(&quot;Sample13&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_310">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_310">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        message = &quot;Something is wrong with your data&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample13&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_311">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_311">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample13&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_312">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_312">&#182;</a>
							</div>
							<h3><i>This sample will show how  to check the list of shares for a folder</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample14()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_313">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_313">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_314">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_314">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String path = Request.Form[&quot;path&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_315">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_315">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;path&quot;, path);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_316">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_316">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || path == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_317">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_317">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample14&quot;, null, result);
                }
                else
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_318">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_318">&#182;</a>
							</div>
							<h3>Create a proper path from entered path</h3>

<p>Reaplace dashlet's with proper dashlet "/"</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String properPath = path.Replace(&quot;(\\/)&quot;, &quot;/&quot;);
</code></pre>
						</td>
					</tr>
					<tr id="section_319">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_319">&#182;</a>
							</div>
							<p>Convert string to array</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String[] pathArray = properPath.Split(&#39;/&#39;);
                    String lastFolder = &quot;&quot;;
                    String newPath = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_320">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_320">&#182;</a>
							</div>
							<p>Check if array content more than one element</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (pathArray.Length &gt; 1)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_321">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_321">&#182;</a>
							</div>
							<p>Create string with proper path from array</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        lastFolder = pathArray[pathArray.Length - 1];
                        newPath = String.Join(&quot;/&quot;, pathArray);
                    }
                    else
                    {
                        lastFolder = pathArray[0];
                    }
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_322">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_322">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_323">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_323">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_324">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_324">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_325">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_325">&#182;</a>
							</div>
							<p>Get all folders from account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.ListEntitiesResult folders = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, true, null, null);
                    decimal folderId = new decimal();
</code></pre>
						</td>
					</tr>
					<tr id="section_326">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_326">&#182;</a>
							</div>
							<p>Get folder Id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (folders.Folders != null)
                    {
                        for (int i = 0; i &lt; folders.Folders.Length; i++)
                        {
                            if (folders.Folders[i].Name == lastFolder)
                            {
                                folderId = folders.Folders[i].Id;
                            }
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_327">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_327">&#182;</a>
							</div>
							<p>Get all sharers for entered folder</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.UserInfo[] shares = service.GetFolderSharers(folderId);
</code></pre>
						</td>
					</tr>
					<tr id="section_328">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_328">&#182;</a>
							</div>
							<p>Check is request return data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (shares.Length != 0)
                    {
                        String emails = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_329">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_329">&#182;</a>
							</div>
							<p>Get all emails of sharers</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int n = 0; n &lt; shares.Length; n++)
                        {
                            emails += shares[n].PrimaryEmail + &quot;&lt;br /&gt;&quot;;
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_330">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_330">&#182;</a>
							</div>
							<p>Convert string to HTML string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                         MvcHtmlString email = MvcHtmlString.Create(emails);
</code></pre>
						</td>
					</tr>
					<tr id="section_331">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_331">&#182;</a>
							</div>
							<p>Return primary email to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;shares&quot;, email);
                        return View(&quot;Sample14&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_332">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_332">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        message = &quot;Something is wrong with your data&quot;;
                        result.Add(&quot;error&quot;, message);
                        return View(&quot;Sample14&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_333">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_333">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample14&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_334">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_334">&#182;</a>
							</div>
							<h3><i>This sample will show how  to check the number of document's views using .NET SDK</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample15()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_335">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_335">&#182;</a>
							</div>
							<p>Check is data posted    </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_336">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_336">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.DocumentViewsResult userInfo = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_337">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_337">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_338">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_338">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_339">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_339">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample15&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_340">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_340">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_341">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_341">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_342">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_342">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_343">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_343">&#182;</a>
							</div>
							<p>Get info about documents view</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    userInfo = service.GetDocumentViews(0);
</code></pre>
						</td>
					</tr>
					<tr id="section_344">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_344">&#182;</a>
							</div>
							<p>Return amount of elements which will be a views amount</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;views&quot;, userInfo.Views.Length);
</code></pre>
						</td>
					</tr>
					<tr id="section_345">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_345">&#182;</a>
							</div>
							<p>Return Hashtable with results to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample15&quot;, null, result);
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_346">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_346">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample15&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_347">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_347">&#182;</a>
							</div>
							<h3><i>This sample will show how to insert Assembly questionary into webpage using .NET SDK</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample16()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_348">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_348">&#182;</a>
							</div>
							<p>Check is data posted    </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String fileGuId = &quot;&quot;;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_349">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_349">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_350">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_350">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample16&quot;, null, result);
                }
                else
                {

                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_351">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_351">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_352">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_352">&#182;</a>
							</div>
							<p>Check is chosen local file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.ContentLength.Equals(0))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_353">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_353">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_354">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_354">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_355">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_355">&#182;</a>
							</div>
							<p>Put uploaded file GuId to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_356">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_356">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            message = &quot;UploadFile returns error&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample16&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_357">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_357">&#182;</a>
							</div>
							<p>Check is url entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_358">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_358">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_359">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_359">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_360">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_360">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileGuId = storageInfo.Files[i].Guid;

                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample16&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_361">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_361">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample16&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_362">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_362">&#182;</a>
							</div>
							<p>Check is file guid entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
                        fileGuId = fileId;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_363">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_363">&#182;</a>
							</div>
							<p>Set data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;guid&quot;, fileGuId);
                }
                return View(&quot;Sample16&quot;, null, result);
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_364">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_364">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample16&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_365">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_365">&#182;</a>
							</div>
							<h3><i>This sample will show how to upload a file into the storage and compress it into zip archive </i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample17()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_366">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_366">&#182;</a>
							</div>
							<p>Check is data posted   </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_367">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_367">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String url = Request.Form[&quot;url&quot;];
                decimal Id = new decimal();
                String name = &quot;&quot;;
                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                Groupdocs.Api.Contract.UploadRequestResult upload = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_368">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_368">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_369">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_369">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_370">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_370">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample17&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_371">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_371">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
                    result.Add(&quot;basePath&quot;, basePath);
                    if (url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_372">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_372">&#182;</a>
							</div>
							<h3>Upload file</h3>

<p>Get tag's names from form</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        foreach (string inputTagName in Request.Files)
                        {
                            var file = Request.Files[inputTagName];
</code></pre>
						</td>
					</tr>
					<tr id="section_373">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_373">&#182;</a>
							</div>
							<p>Check that file is not fake.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            if (file.ContentLength &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_374">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_374">&#182;</a>
							</div>
							<p>Upload file with empty description.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
</code></pre>
						</td>
					</tr>
					<tr id="section_375">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_375">&#182;</a>
							</div>
							<p>Check is upload successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                if (upload.Guid != null)
                                {
                                    Id = upload.Id;
                                    name = upload.AdjustedName;

                                }
</code></pre>
						</td>
					</tr>
					<tr id="section_376">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_376">&#182;</a>
							</div>
							<p>If upload was failed return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                else
                                {
                                    message = &quot;UploadFile returns error&quot;;
                                    result.Add(&quot;error&quot;, message);
                                    return View(&quot;Sample17&quot;, null, result);
                                }
                            }
                        }
                    }
                    if (!url.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_377">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_377">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String uploadUrl = service.UploadUrl(url);
                        if (!uploadUrl.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_378">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_378">&#182;</a>
							</div>
							<p>Get all files from account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult files = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, true, null, null);

</code></pre>
						</td>
					</tr>
					<tr id="section_379">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_379">&#182;</a>
							</div>
							<p>Check if request return data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            if (files.Files.Length != 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_380">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_380">&#182;</a>
							</div>
							<p>Get Name and Id of compresed file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; files.Files.Length; i++)
                                {
                                    if (files.Files[i].Guid == uploadUrl)
                                    {
                                        Id = files.Files[i].Id;
                                        name = files.Files[i].Name;
                                    }
                                }

                            }
                            else
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_381">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_381">&#182;</a>
							</div>
							<p>If file GuId is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                result.Add(&quot;error&quot;, &quot;File Name is empty&quot;);
                                return View(&quot;Sample17&quot;, null, result);
                            }
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_382">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_382">&#182;</a>
							</div>
							<p>Compress uploaded file into "zip" archive</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    decimal convertId = service.CompressFile(Id, Groupdocs.Common.ArchiveType.Zip);
</code></pre>
						</td>
					</tr>
					<tr id="section_383">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_383">&#182;</a>
							</div>
							<p>Get all files from account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.ListEntitiesResult filesList = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, true, null, null);

</code></pre>
						</td>
					</tr>
					<tr id="section_384">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_384">&#182;</a>
							</div>
							<p>Check if request return data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (filesList.Files.Length != 0)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_385">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_385">&#182;</a>
							</div>
							<p>Get Name and Id of compresed file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; filesList.Files.Length; i++)
                        {
                            if (filesList.Files[i].Id == convertId)
                            {
                                name = filesList.Files[i].Name;
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_386">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_386">&#182;</a>
							</div>
							<p>If file uploaded and compresed return message with file name to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;message&quot;, &quot;Archive created and saved successfully as &quot; + name);
                        return View(&quot;Sample17&quot;, null, result);
                    }
                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_387">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_387">&#182;</a>
							</div>
							<p>If file GuId is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;error&quot;, &quot;File Name is empty&quot;);
                           
                    }

                }
                return View(&quot;Sample17&quot;, null, result);
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_388">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_388">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample17&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_389">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_389">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>ConvertFile</b> method from to convert a document to other type</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample18()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_390">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_390">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_391">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_391">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String privateKey = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String type = Request.Form[&quot;convert_type&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String callback = Request.Form[&quot;callback&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_392">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_392">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, privateKey);
                result.Add(&quot;fileId&quot;, fileId);
                result.Add(&quot;type&quot;, type);

                if (!String.IsNullOrEmpty(callback))
                {
                    result.Add(&quot;callback&quot;, callback);
                }

                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_393">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_393">&#182;</a>
							</div>
							<p>Check is all required fields were provided</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(privateKey) || String.IsNullOrEmpty(type)
                    || (String.IsNullOrEmpty(fileId) &amp;&amp; (String.IsNullOrEmpty(url)) &amp;&amp; (file.ContentLength == 0)))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_394">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_394">&#182;</a>
							</div>
							<p>If not all required fields were provided - send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample18&quot;, null, result);
                }
                else
                {
                    
</code></pre>
						</td>
					</tr>
					<tr id="section_395">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_395">&#182;</a>
							</div>
							<p>path to settings file - temporary save userId and apiKey like to property file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    create_info_file(userId, privateKey);

                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_396">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_396">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_397">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_397">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_398">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_398">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, privateKey);

</code></pre>
						</td>
					</tr>
					<tr id="section_399">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_399">&#182;</a>
							</div>
							<p>if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (url != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_400">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_400">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_401">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_401">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileId = guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_402">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_402">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample18&quot;, null, result);
                        }
                    }

</code></pre>
						</td>
					</tr>
					<tr id="section_403">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_403">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (file.FileName != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_404">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_404">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_405">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_405">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileId = upload.Guid;
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_406">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_406">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample18&quot;, null, result);
                        }
                    }


                    decimal jobId = 0;
                    try
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_407">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_407">&#182;</a>
							</div>
							<p>Make request to api for convert file.
@fileId - GUID. Represents the provided file - via guid, web url or local file.
@type - File type of the result file
@callback - callback URL</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        jobId = service.ConvertFile(fileId, type, &quot;&quot;, false, false, callback);
                    }
                    catch (Exception e)
                    {

                        result.Add(&quot;error&quot;, e.ToString());
                        return View(&quot;Sample18&quot;, null, result);
                    }

                    /*
                     * The approack bellow is not good one to get Job Results directly in the code after ConvertFile method.
                     * We use this approach to show the result file in embedded iframe on the same sample page.
                     * In production it&#39;s better to use Callback approach - this approach allso implemented in this sample. 
                     */

</code></pre>
						</td>
					</tr>
					<tr id="section_408">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_408">&#182;</a>
							</div>
							<p>Delay is required to be shure that the file was processed</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    System.Threading.Thread.Sleep(5000);
</code></pre>
						</td>
					</tr>
					<tr id="section_409">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_409">&#182;</a>
							</div>
							<p>Make request to api to get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.GetJobDocumentsResult job = service.GetJobDocuments(jobId);

                    if (job.Inputs[0].Outputs[0].Guid != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_410">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_410">&#182;</a>
							</div>
							<p>Return file guid to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;guid&quot;, job.Inputs[0].Outputs[0].Guid);
                        return View(&quot;Sample18&quot;, null, result);
                    }
                    else
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_411">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_411">&#182;</a>
							</div>
							<p>If file GuId is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;error&quot;, &quot;File GuId is empty&quot;);
                        return View(&quot;Sample18&quot;, null, result);
                    }
        
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_412">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_412">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample18&quot;);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_413">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_413">&#182;</a>
							</div>
							<h3><i>This sample will show how to Compare documents</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample19()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_414">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_414">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_415">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_415">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String sourceFileId = &quot;&quot;;
                String targetFileId = &quot;&quot;;
                String callback = Request.Form[&quot;callback&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
                String sourceId = Request.Form[&quot;sourceFileId&quot;];
                String targetId = Request.Form[&quot;targetFileId&quot;];
                String type = Request.Form[&quot;convert_type&quot;];
                String url = Request.Form[&quot;url&quot;];
                String targetUrl = Request.Form[&quot;target_url&quot;];
                var targetFile = Request.Files[&quot;target_file&quot;];
                var file = Request.Files[&quot;file&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_416">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_416">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
               
</code></pre>
						</td>
					</tr>
					<tr id="section_417">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_417">&#182;</a>
							</div>
							<p>Check if callback is not empty</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (!String.IsNullOrEmpty(callback))
                {
                    result.Add(&quot;callback&quot;, callback);
                }

                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_418">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_418">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(private_key))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_419">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_419">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample19&quot;, null, result);
                }
                else
                {
                    
</code></pre>
						</td>
					</tr>
					<tr id="section_420">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_420">&#182;</a>
							</div>
							<p>path to settings file - temporary save userId and apiKey like to property file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    create_info_file(userId, private_key);
                    if (basePath.Equals(&quot;&quot;))
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_421">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_421">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_422">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_422">&#182;</a>
							</div>
							<p>if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;) || !targetUrl.Equals(&quot;&quot;))
                    {
                        if (!url.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_423">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_423">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            String guid = service.UploadUrl(url);
                            if (guid != null)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_424">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_424">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                sourceFileId = guid;

                            }
</code></pre>
						</td>
					</tr>
					<tr id="section_425">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_425">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            else
                            {
                                result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                                return View(&quot;Sample19&quot;, null, result);
                            }
                        }
                        if (!targetUrl.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_426">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_426">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            String targetGuid = service.UploadUrl(targetUrl);
                            if (targetGuid != null)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_427">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_427">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                targetFileId = targetGuid;

                            }
</code></pre>
						</td>
					</tr>
					<tr id="section_428">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_428">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            else
                            {
                                result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                                return View(&quot;Sample19&quot;, null, result);
                            }
                        }
                    }

</code></pre>
						</td>
					</tr>
					<tr id="section_429">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_429">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.FileName.Equals(&quot;&quot;) || !targetFile.FileName.Equals(&quot;&quot;))
                    {
                        if (!file.FileName.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_430">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_430">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
                            if (upload.Guid != null)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_431">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_431">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                sourceFileId = upload.Guid;
                            }
                            else
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_432">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_432">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                                return View(&quot;Sample19&quot;, null, result);
                            }
                        }
                        if (!targetFile.FileName.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_433">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_433">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.UploadRequestResult targetUpload = service.UploadFile(targetFile.FileName, String.Empty, targetFile.InputStream);
                            if (targetUpload.Guid != null)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_434">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_434">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                targetFileId = targetUpload.Guid;
                            }
                            else
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_435">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_435">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                                return View(&quot;Sample19&quot;, null, result);
                            }
                        }
                    }
                    if (!sourceId.Equals(&quot;&quot;) || !targetId.Equals(&quot;&quot;))
                    {
                        if (!sourceId.Equals(&quot;&quot;))
                        {
                            sourceFileId = sourceId;
                        }
                        if (!targetId.Equals(&quot;&quot;))
                        {
                            targetFileId = targetId;
                        }
                    }
                    result.Add(&quot;sourceFileId&quot;, sourceFileId);
                    result.Add(&quot;targetFileId&quot;, targetFileId);
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_436">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_436">&#182;</a>
							</div>
							<p>Compare two documents and setting collback Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Comparison.Contract.CompareResponse compare = service.Compare(sourceFileId, targetFileId, callback);

                    if (compare.Status.Equals(&quot;Completed&quot;) || compare.Status.Equals(&quot;Archived&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_437">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_437">&#182;</a>
							</div>
							<p>Delay necessary that the inquiry would manage to be processed</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        System.Threading.Thread.Sleep(5000);
</code></pre>
						</td>
					</tr>
					<tr id="section_438">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_438">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.GetJobDocumentsResult job = service.GetJobDocuments(compare.Result.JobId);

                        if (job.Outputs[0].Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_439">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_439">&#182;</a>
							</div>
							<p>Return file guid to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;guid&quot;, job.Outputs[0].Guid);
                            return View(&quot;Sample19&quot;, null, result);
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_440">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_440">&#182;</a>
							</div>
							<p>If file GuId is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;File GuId is empty&quot;);
                            return View(&quot;Sample19&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_441">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_441">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, compare.ErrorMessage);
                        return View(&quot;Sample19&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_442">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_442">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample19&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_443">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_443">&#182;</a>
							</div>
							<h3><i>This sample will show how to Get Compare Change list for document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample20()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_444">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_444">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_445">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_445">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String resultFileId = Request.Form[&quot;resultFileId&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_446">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_446">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;sourceFileId&quot;, resultFileId);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_447">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_447">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || resultFileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_448">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_448">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample20&quot;, null, result);
                }
                else
                {

                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_449">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_449">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_450">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_450">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_451">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_451">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_452">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_452">&#182;</a>
							</div>
							<h3>Make request to ComparisonApi using user id</h3>

<p>Get changes list for document</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Comparison.Contract.ChangesResponse info = service.GetChanges(resultFileId);

                    if (info.Status != null)
                    {
                       
		                String action = null;
		                String width = null;
                        String height = null;
		                String text = null;
		                String type = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_453">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_453">&#182;</a>
							</div>
							<h3>Create table with changes for template</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String table = &quot;&lt;table class=&#39;border&#39;&gt;&quot;;
                        table += &quot;&lt;tr&gt;&lt;td&gt;&lt;font color=&#39;green&#39;&gt;Change Name&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&lt;font color=&#39;green&#39;&gt;Change&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_454">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_454">&#182;</a>
							</div>
							<p>Count of iterations                                </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>						for (int i = 0; i &lt; info.Result.Changes.Length; i++) {
</code></pre>
						</td>
					</tr>
					<tr id="section_455">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_455">&#182;</a>
							</div>
							<h3>Check received data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>							if (info.Result.Changes[i].Action == null) {
								action = &quot;&quot;;
							} else {
								action = info.Result.Changes[i].Action;
							}
							
							if (info.Result.Changes[i].Page == null) {
								width = &quot;&quot;;
							} else {
								width = Convert.ToString(info.Result.Changes[i].Page.Width);
							}

                            if (info.Result.Changes[i].Page == null) {
								height = &quot;&quot;;
							} else {
								height = Convert.ToString(info.Result.Changes[i].Page.Height);
							}
							
							if ( info.Result.Changes[i].Text == null) {
								text = &quot;&quot;;
							} else {
								text = info.Result.Changes[i].Text;
							}
							
							if ( info.Result.Changes[i].Type == null) {
								type = &quot;&quot;;
							} else {
								type = info.Result.Changes[i].Type;
							}
</code></pre>
						</td>
					</tr>
					<tr id="section_456">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_456">&#182;</a>
							</div>
							<p>Formation of a body of the table</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>							table += &quot;&lt;tr&gt;&lt;td&gt;Id&lt;/td&gt;&lt;td&gt;&quot; + info.Result.Changes[i].Id + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
							table += &quot;&lt;tr&gt;&lt;td&gt;Action&lt;/td&gt;&lt;td&gt;&quot; + action + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
							table += &quot;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;&quot; + text + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
							table += &quot;&lt;tr&gt;&lt;td&gt;Type&lt;/td&gt;&lt;td&gt;&quot; + type + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
							table += &quot;&lt;tr&gt;&lt;td&gt;Width&lt;/td&gt;&lt;td&gt;&quot; + width + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
                            table += &quot;&lt;tr&gt;&lt;td&gt;Height&lt;/td&gt;&lt;td&gt;&quot; + height + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
							table += &quot;&lt;tr bgcolor=&#39;#808080&#39;&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;
                        }

                        table += &quot;&lt;/table&gt;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_457">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_457">&#182;</a>
							</div>
							<p>Convert string to HTML string</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        MvcHtmlString infoTable = MvcHtmlString.Create(table);
</code></pre>
						</td>
					</tr>
					<tr id="section_458">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_458">&#182;</a>
							</div>
							<p>Return table to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;info&quot;, infoTable);
                        return View(&quot;SAmple20&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_459">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_459">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, info.ErrorMessage);
                        return View(&quot;Sample20&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_460">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_460">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample20&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_461">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_461">&#182;</a>
							</div>
							<h3><i>This sample will show how to use StorageApi to Create and Upload Envelop to GroupDocs account</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample21()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_462">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_462">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_463">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_463">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String email = Request.Form[&quot;email&quot;];
                String name = Request.Form[&quot;name&quot;];
                String lastName = Request.Form[&quot;lastName&quot;];
                String callback = Request.Form[&quot;callback&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String fileName = &quot;&quot;;
                String guid = &quot;&quot;;
                String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_464">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_464">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;email&quot;, email);
                result.Add(&quot;firstName&quot;, name);
                result.Add(&quot;lastName&quot;, lastName);
                
</code></pre>
						</td>
					</tr>
					<tr id="section_465">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_465">&#182;</a>
							</div>
							<p>Check if callback is not empty</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (!String.IsNullOrEmpty(callback))
                {
                    result.Add(&quot;callback&quot;, callback);
                }

                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_466">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_466">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(private_key) || String.IsNullOrEmpty(email)
                    || String.IsNullOrEmpty(lastName) || String.IsNullOrEmpty(name))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_467">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_467">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample21&quot;, null, result);
                }
                else
                {
                    
</code></pre>
						</td>
					</tr>
					<tr id="section_468">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_468">&#182;</a>
							</div>
							<p>path to settings file - temporary save userId and apiKey like to property file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    create_info_file(userId, private_key);
                    if (basePath.Equals(&quot;&quot;))
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_469">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_469">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_470">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_470">&#182;</a>
							</div>
							<p>if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {
                       
</code></pre>
						</td>
					</tr>
					<tr id="section_471">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_471">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String uploadWeb = service.UploadUrl(url);
                        if (uploadWeb != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_472">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_472">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = uploadWeb;
</code></pre>
						</td>
					</tr>
					<tr id="section_473">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_473">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;My Web Documents&quot;, 0, -1, null, false, null, null, true);
                            if (storageInfo.Files.Length &gt; 0)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_474">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_474">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                                {
                                    if (storageInfo.Files[i].Guid == guid)
                                    {
                                        fileName = storageInfo.Files[i].Name;
                                    }

                                }
                            }
                            else
                            {
                                message = &quot;Get files list is failed&quot;;
                                result.Add(&quot;error&quot;, message);
                                return View(&quot;Sample21&quot;, null, result);
                            }

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_475">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_475">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample21&quot;, null, result);
                        }
                       
                    }

</code></pre>
						</td>
					</tr>
					<tr id="section_476">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_476">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.FileName.Equals(&quot;&quot;))
                    {
                        
</code></pre>
						</td>
					</tr>
					<tr id="section_477">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_477">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_478">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_478">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = upload.Guid;
                            fileName = upload.AdjustedName;
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_479">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_479">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample21&quot;, null, result);
                        }
                        
                    }
                    if (!fileId.Equals(&quot;&quot;))
                    {
                        guid = fileId;
</code></pre>
						</td>
					</tr>
					<tr id="section_480">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_480">&#182;</a>
							</div>
							<p>Get all files from GroupDocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.ListEntitiesResult storageInfo = service.GetFileSystemEntities(&quot;&quot;, 0, -1, null, false, null, null, true);
                        if (storageInfo.Files.Length &gt; 0)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_481">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_481">&#182;</a>
							</div>
							<p>Get file id by uploaded file GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; storageInfo.Files.Length; i++)
                            {
                                if (storageInfo.Files[i].Guid == guid)
                                {
                                    fileName = storageInfo.Files[i].Name;
                                   
                                }

                            }
                        }
                        else
                        {
                            message = &quot;Get files list is failed&quot;;
                            result.Add(&quot;error&quot;, message);
                            return View(&quot;Sample21&quot;, null, result);
                        }
                       
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_482">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_482">&#182;</a>
							</div>
							<p>Check is file uploaded</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!guid.Equals(&quot;&quot;) &amp;&amp; !fileName.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_483">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_483">&#182;</a>
							</div>
							<p>Create envilope using user id and entered by user name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.SignatureEnvelopeResponse envelop = service.CreateEnvelope(&quot;&quot;, &quot;&quot;, fileName, guid, false);
                        if (envelop.Status.Equals(&quot;Ok&quot;))
                        {
                            decimal dec = new decimal();
</code></pre>
						</td>
					</tr>
					<tr id="section_484">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_484">&#182;</a>
							</div>
							<p>Get role list for curent user</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.SignatureRolesResponse roles = service.GetSignatureRoles(&quot;&quot;);
                            String roleId = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_485">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_485">&#182;</a>
							</div>
							<p>Get id of role which can sign</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int i = 0; i &lt; roles.Result.Roles.Length; i++)
                            {
                                if (roles.Result.Roles[i].Name.Equals(&quot;Signer&quot;))
                                {
                                    roleId = roles.Result.Roles[i].Id;
                                    break;
                                }
                            }
</code></pre>
						</td>
					</tr>
					<tr id="section_486">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_486">&#182;</a>
							</div>
							<p>Add recipient to envelope</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.SignatureEnvelopeRecipientResponse addRecipient = service.AddEnvelopeRecipient(envelop.Result.Envelope.Id, email, name, lastName, roleId, dec);
                            if (addRecipient.Status.Equals(&quot;Ok&quot;))
                            {
                                Groupdocs.Api.Contract.SignatureEnvelopeDocumentsResponse getDocuments = service.GetEnvelopeDocuments(envelop.Result.Envelope.Id);
                                if (getDocuments.Status.Equals(&quot;Ok&quot;))
                                {
                                    Groupdocs.Api.Contract.SignatureEnvelopeFieldsResponse getFields = service.GetEnvelopeFields(envelop.Result.Envelope.Id, getDocuments.Result.Documents[0].DocumentId, addRecipient.Result.Recipient.Id);
                                    if (getFields.Status.Equals(&quot;Ok&quot;))
                                    {
                                        Groupdocs.Api.Contract.SignatureEnvelopeFieldInfo[] fieldInfo = getFields.Result.Fields;
                                        if (fieldInfo.Length == 0)
                                        {
                                            result.Add(&quot;error&quot;, &quot;You use a wrong file, it&#39;s don&#39;t content any fields for sign&quot;);
                                            return View(&quot;Sample21&quot;, null, result);
                                        }
                                        for (int n = 0; n &lt; fieldInfo.Length; n++)
                                        {
                                            Groupdocs.Api.Contract.SignatureEnvelopeFieldSettings fieldsSettings = new Groupdocs.Api.Contract.SignatureEnvelopeFieldSettings();
                                            fieldsSettings.Name = fieldInfo[n].Name;
                                            fieldsSettings.LocationHeight = Convert.ToDecimal(fieldInfo[n].Locations[0].LocationHeight);
                                            fieldsSettings.LocationWidth = Convert.ToDecimal(fieldInfo[n].Locations[0].LocationWidth);
                                            fieldsSettings.LocationX = Convert.ToDecimal(fieldInfo[n].Locations[0].LocationX);
                                            fieldsSettings.LocationY = Convert.ToDecimal(fieldInfo[n].Locations[0].LocationY);
                                            Groupdocs.Api.Contract.SignatureEnvelopeFieldResponse addFields = service.AddEnvelopeField(envelop.Result.Envelope.Id, getDocuments.Result.Documents[0].DocumentId, addRecipient.Result.Recipient.Id, fieldInfo[n].Id, fieldsSettings);
                                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_487">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_487">&#182;</a>
							</div>
							<p>Send envelop with callback url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                        Groupdocs.Api.Contract.SignatureEnvelopeSendResponse send = service.SendEnvelope(envelop.Result.Envelope.Id, callback);
</code></pre>
						</td>
					</tr>
					<tr id="section_488">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_488">&#182;</a>
							</div>
							<p>Check is envelope send status</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                        if (send.Status.Equals(&quot;Ok&quot;))
                                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_489">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_489">&#182;</a>
							</div>
							<p>Set data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                            result.Add(&quot;envelop&quot;, envelop.Result.Envelope.Id);
                                            result.Add(&quot;recipient&quot;, addRecipient.Result.Recipient.Id);
                                            return View(&quot;Sample21&quot;, null, result);
                                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_490">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_490">&#182;</a>
							</div>
							<p>If status failed set error for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                        else
                                        {
                                            result.Add(&quot;error&quot;, send.ErrorMessage);
                                            return View(&quot;Sample21&quot;, null, result);
                                        }
                                        
                                    }
                                    else
                                    {
                                        result.Add(&quot;error&quot;, getFields.ErrorMessage);
                                        return View(&quot;Sample21&quot;, null, result);
                                    }
                                }
                                else
                                {
                                    result.Add(&quot;error&quot;, getDocuments.ErrorMessage);
                                    return View(&quot;Sample21&quot;, null, result);
                                }
                            }
                            else
                            {
                                result.Add(&quot;error&quot;, addRecipient.ErrorMessage);
                                return View(&quot;Sample21&quot;, null, result);
                            }
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_491">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_491">&#182;</a>
							</div>
							<p>If envelope wasn't created send error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, envelop.ErrorMessage);
                            return View(&quot;Sample21&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_492">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_492">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, &quot;Upload is failed&quot;);
                        return View(&quot;Sample21&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_493">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_493">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample21&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_494">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_494">&#182;</a>
							</div>
							<h3><i>This sample will show how create or update user and add him to collaborators</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample22()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_495">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_495">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_496">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_496">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String email = Request.Form[&quot;email&quot;];
                String firstName = Request.Form[&quot;first_name&quot;];
                String lastName = Request.Form[&quot;last_name&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String guid = &quot;&quot;;
                String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_497">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_497">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;email&quot;, email);
                result.Add(&quot;firstName&quot;, firstName);
                result.Add(&quot;lastName&quot;, lastName);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_498">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_498">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(private_key) || String.IsNullOrEmpty(email)
                    || String.IsNullOrEmpty(lastName) || String.IsNullOrEmpty(firstName))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_499">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_499">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample22&quot;, null, result);
                }
                else
                {
                    
                    if (basePath.Equals(&quot;&quot;))
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_500">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_500">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);

</code></pre>
						</td>
					</tr>
					<tr id="section_501">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_501">&#182;</a>
							</div>
							<p>if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {

</code></pre>
						</td>
					</tr>
					<tr id="section_502">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_502">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String uploadWeb = service.UploadUrl(url);
                        if (uploadWeb != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_503">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_503">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = uploadWeb;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_504">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_504">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample22&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_505">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_505">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.FileName.Equals(&quot;&quot;))
                    {

</code></pre>
						</td>
					</tr>
					<tr id="section_506">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_506">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_507">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_507">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = upload.Guid;
                           
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_508">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_508">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample22&quot;, null, result);
                        }

                    }
                    if (!fileId.Equals(&quot;&quot;))
                    {
                        guid = fileId;

                    }
                    result.Add(&quot;fileId&quot;, guid);
</code></pre>
						</td>
					</tr>
					<tr id="section_509">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_509">&#182;</a>
							</div>
							<p>Create User info object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.UserInfo user = new Groupdocs.Api.Contract.UserInfo();
</code></pre>
						</td>
					</tr>
					<tr id="section_510">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_510">&#182;</a>
							</div>
							<p>Create Role info object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.RoleInfo roleInfo = new Groupdocs.Api.Contract.RoleInfo();
</code></pre>
						</td>
					</tr>
					<tr id="section_511">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_511">&#182;</a>
							</div>
							<p>Create array of roles.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.RoleInfo[] roleList = new Groupdocs.Api.Contract.RoleInfo[1];
</code></pre>
						</td>
					</tr>
					<tr id="section_512">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_512">&#182;</a>
							</div>
							<p>Set user role Id. Can be: 1 -  SysAdmin, 2 - Admin, 3 - User, 4 - Guest</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    roleInfo.Id = 3;
</code></pre>
						</td>
					</tr>
					<tr id="section_513">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_513">&#182;</a>
							</div>
							<p>Set user role name. Can be: SysAdmin, Admin, User, Guest</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    roleInfo.Name = &quot;User&quot;;
                    roleList[0] = roleInfo;
</code></pre>
						</td>
					</tr>
					<tr id="section_514">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_514">&#182;</a>
							</div>
							<p>Set nick name as entered first name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    user.NickName = firstName;
</code></pre>
						</td>
					</tr>
					<tr id="section_515">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_515">&#182;</a>
							</div>
							<p>Set first name as entered first name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    user.FirstName = firstName;
</code></pre>
						</td>
					</tr>
					<tr id="section_516">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_516">&#182;</a>
							</div>
							<p>Set last name as entered last name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    user.LastName = lastName;
                    user.Roles = roleList;
</code></pre>
						</td>
					</tr>
					<tr id="section_517">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_517">&#182;</a>
							</div>
							<p>Set email as entered email</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    user.PrimaryEmail = email;
</code></pre>
						</td>
					</tr>
					<tr id="section_518">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_518">&#182;</a>
							</div>
							<p>Creating of new User user - object with new user info</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.UserIdentity newUser = service.UpdateAccountUser(user);
</code></pre>
						</td>
					</tr>
					<tr id="section_519">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_519">&#182;</a>
							</div>
							<p>If request return's null return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (newUser.Guid != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_520">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_520">&#182;</a>
							</div>
							<p>Create array with entered email for SetAnnotationCollaborators method </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String[] emails = new String[1];
                        emails[0] = email;
</code></pre>
						</td>
					</tr>
					<tr id="section_521">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_521">&#182;</a>
							</div>
							<p>Make request to Ant api for set new user as annotation collaborator</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.Annotation.SetCollaboratorsResult addCollaborator = service.SetAnnotationCollaborators(guid, emails, &quot;2.0&quot;);
                        if (addCollaborator.Collaborators != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_522">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_522">&#182;</a>
							</div>
							<p>Set reviewers rights for new user.</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            Groupdocs.Api.Contract.Annotation.SetReviewerRightsResult setReviewer = service.SetReviewerRights(guid, addCollaborator.Collaborators);
</code></pre>
						</td>
					</tr>
					<tr id="section_523">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_523">&#182;</a>
							</div>
							<p>Return GuId of new User to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;userId&quot;, newUser.Guid);
                            return View(&quot;Sample22&quot;, null, result);
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_524">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_524">&#182;</a>
							</div>
							<p>If Collaborators is empty return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Collaborators is empty&quot;);
                            return View(&quot;Sample22&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_525">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_525">&#182;</a>
							</div>
							<p>If upload file returns faile, return error to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, &quot;Upload is failed&quot;);
                        return View(&quot;Sample22&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_526">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_526">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample22&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_527">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_527">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>GuId</b> of file to generate an embedded Viewer URL for a Document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample23()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_528">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_528">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_529">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_529">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                var file = Request.Files[&quot;file&quot;];
                String guid = &quot;&quot;;
                String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_530">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_530">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;basePath&quot;, basePath);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_531">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_531">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null )
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_532">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_532">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample23&quot;, null, result);
                }
                else
                {

                    if (basePath.Equals(&quot;&quot;))
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_533">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_533">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);

</code></pre>
						</td>
					</tr>
					<tr id="section_534">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_534">&#182;</a>
							</div>
							<p>if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!url.Equals(&quot;&quot;))
                    {

</code></pre>
						</td>
					</tr>
					<tr id="section_535">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_535">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String uploadWeb = service.UploadUrl(url);
                        if (uploadWeb != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_536">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_536">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = uploadWeb;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_537">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_537">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample22&quot;, null, result);
                        }

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_538">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_538">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!file.FileName.Equals(&quot;&quot;))
                    {

</code></pre>
						</td>
					</tr>
					<tr id="section_539">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_539">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, String.Empty, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_540">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_540">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            guid = upload.Guid;

                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_541">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_541">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample22&quot;, null, result);
                        }

                    }
                    if (!fileId.Equals(&quot;&quot;))
                    {
                        guid = fileId;

                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_542">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_542">&#182;</a>
							</div>
							<p>Make request to get document pages as images</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.ViewDocumentResult pageImage = service.ViewDocument(guid, 0, null, null, 100, false);
                    if (pageImage.Guid != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_543">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_543">&#182;</a>
							</div>
							<p>Return page images GuId to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;fileId&quot;, pageImage.Guid);
                        return View(&quot;Sample23&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_544">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_544">&#182;</a>
							</div>
							<p>If request return empty GuId set error for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                        return View(&quot;Sample23&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_545">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_545">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample23&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_546">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_546">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>Upload</b> method from Storage Api to upload file to GroupDocs Storage </i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample24()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_547">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_547">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_548">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_548">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String url = Request.Form[&quot;url&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_549">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_549">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;url&quot;, url);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_550">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_550">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || url == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_551">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_551">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample24&quot;, null, result);
                }
                else
                {

                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_552">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_552">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_553">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_553">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_554">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_554">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_555">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_555">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    String guid = service.UploadUrl(url);
                    if (guid != null)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_556">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_556">&#182;</a>
							</div>
							<p>If file uploaded return his GuId to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        result.Add(&quot;fileId&quot;, guid);
                        return View(&quot;Sample24&quot;, null, result);
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_557">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_557">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    else
                    {
                        result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                        return View(&quot;Sample24&quot;, null, result);
                    }

                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_558">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_558">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample24&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_559">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_559">&#182;</a>
							</div>
							<h3><i>This sample will show how to convert DOCX with template fields file into PDF file</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample25()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_560">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_560">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_561">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_561">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                String fileGuId = &quot;&quot;;
                var file = Request.Files[&quot;file&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_562">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_562">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_563">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_563">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(private_key))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_564">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_564">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample25&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_565">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_565">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_566">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_566">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_567">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_567">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_568">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_568">&#182;</a>
							</div>
							<p>Make request to get document pages as images
if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (url != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_569">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_569">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_570">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_570">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_571">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_571">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample25&quot;, null, result);
                        }
                    }

</code></pre>
						</td>
					</tr>
					<tr id="section_572">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_572">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (file.FileName != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_573">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_573">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, &quot;uploaded&quot;, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_574">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_574">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_575">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_575">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample25&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_576">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_576">&#182;</a>
							</div>
							<p>If user choose file guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_577">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_577">&#182;</a>
							</div>
							<p>Set file guid as entered by user file guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        fileGuId = fileId;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_578">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_578">&#182;</a>
							</div>
							<p>Get all fields from template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.TemplateFieldsResult fields = service.GetTemplateFields(fileGuId);
                    if (fields.Fields.Length &gt; 0)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_579">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_579">&#182;</a>
							</div>
							<p>Set fileds counter</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Int32 count = fields.Fields.Length;
</code></pre>
						</td>
					</tr>
					<tr id="section_580">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_580">&#182;</a>
							</div>
							<p>Create Datasource object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.Datasource dataSource = new Groupdocs.Api.Contract.Datasource();
</code></pre>
						</td>
					</tr>
					<tr id="section_581">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_581">&#182;</a>
							</div>
							<p>Create array of DatasourceField objects</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.DatasourceField[] fieldArray = new Groupdocs.Api.Contract.DatasourceField[count];
</code></pre>
						</td>
					</tr>
					<tr id="section_582">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_582">&#182;</a>
							</div>
							<p>Create array od objects with</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        object[] values = new object[2];
</code></pre>
						</td>
					</tr>
					<tr id="section_583">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_583">&#182;</a>
							</div>
							<p>Set object array content</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        values.SetValue(&quot;value1&quot;, 0);
                        values.SetValue(&quot;value2&quot;, 1);
</code></pre>
						</td>
					</tr>
					<tr id="section_584">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_584">&#182;</a>
							</div>
							<p>Set DatasourceFiled data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; count; i++)
                        {
                            Groupdocs.Api.Contract.DatasourceField field = new Groupdocs.Api.Contract.DatasourceField();
                            Groupdocs.Api.Contract.DatasourceFieldType type = new Groupdocs.Api.Contract.DatasourceFieldType();
                            type = 0;
                            field.Name = fields.Fields[i].Name;
                            field.Type = type;
                            field.Values = values;
</code></pre>
						</td>
					</tr>
					<tr id="section_585">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_585">&#182;</a>
							</div>
							<p>Push DatasourceField to array of DatasourceField objects</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fieldArray.SetValue(field, i);
                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_586">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_586">&#182;</a>
							</div>
							<p>Set feilds array to the Datasource</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        dataSource.Fields = fieldArray;
</code></pre>
						</td>
					</tr>
					<tr id="section_587">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_587">&#182;</a>
							</div>
							<p>Add new Datasource to GroupDocs</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        decimal addDataSource = service.AddDataSource(dataSource);
</code></pre>
						</td>
					</tr>
					<tr id="section_588">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_588">&#182;</a>
							</div>
							<p>Check is not empty addDataSource</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        if (!addDataSource.Equals(&quot;&quot;))
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_589">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_589">&#182;</a>
							</div>
							<p>If status ok merge Datasource to new pdf file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                           decimal job = service.MergeTemplate(fileGuId, addDataSource, &quot;pdf&quot;, false);
                           if (!job.Equals(&quot;&quot;))
                           {
                               Groupdocs.Api.Contract.GetJobDocumentsResult jobInfo = new Groupdocs.Api.Contract.GetJobDocumentsResult();
</code></pre>
						</td>
					</tr>
					<tr id="section_590">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_590">&#182;</a>
							</div>
							<h3>Check job status</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               for (int n = 0; n &lt;= 5; n++)
                               {
</code></pre>
						</td>
					</tr>
					<tr id="section_591">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_591">&#182;</a>
							</div>
							<p>Delay necessary that the inquiry would manage to be processed</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   System.Threading.Thread.Sleep(5000);
</code></pre>
						</td>
					</tr>
					<tr id="section_592">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_592">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   jobInfo = service.GetJobDocuments(job);
</code></pre>
						</td>
					</tr>
					<tr id="section_593">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_593">&#182;</a>
							</div>
							<p>Check job status, if status is Completed or Archived exit from cycle</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   if (jobInfo.JobStatus.Equals(&quot;Completed&quot;) || jobInfo.JobStatus.Equals(&quot;Archived&quot;))
                                   {
                                       break;
</code></pre>
						</td>
					</tr>
					<tr id="section_594">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_594">&#182;</a>
							</div>
							<p>If job status Postponed throw exception with error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   }
                                   else if (jobInfo.JobStatus.Equals(&quot;Postponed&quot;))
                                   {
                                       result.Add(&quot;error&quot;, &quot;Job is fail&quot;);
                                       return View(&quot;Sample25&quot;, null, result);

                                   }
                               }
</code></pre>
						</td>
					</tr>
					<tr id="section_595">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_595">&#182;</a>
							</div>
							<p>Get guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               String guid = jobInfo.Inputs[0].Outputs[0].Guid;
</code></pre>
						</td>
					</tr>
					<tr id="section_596">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_596">&#182;</a>
							</div>
							<p>Get name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               String name = jobInfo.Inputs[0].Outputs[0].Name;
</code></pre>
						</td>
					</tr>
					<tr id="section_597">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_597">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               String LocalPath = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
                               if (!Directory.Exists(LocalPath))
                               {
                                   DirectoryInfo di = Directory.CreateDirectory(LocalPath);
                               }
</code></pre>
						</td>
					</tr>
					<tr id="section_598">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_598">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               bool download = service.DownloadFile(guid, LocalPath + name);
</code></pre>
						</td>
					</tr>
					<tr id="section_599">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_599">&#182;</a>
							</div>
							<p>If file downloaded successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                               if (download != false)
                               {
</code></pre>
						</td>
					</tr>
					<tr id="section_600">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_600">&#182;</a>
							</div>
							<p>Put file info to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   result.Add(&quot;message&quot;, &quot;File was converted and downloaded to the &quot; + LocalPath + &quot;/&quot; + name);
                                   result.Add(&quot;fileId&quot;, guid);
</code></pre>
						</td>
					</tr>
					<tr id="section_601">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_601">&#182;</a>
							</div>
							<p>Return to the template </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                   return View(&quot;Sample25&quot;, null, result);
                               }

                           }
                           else
                           {
                               result.Add(&quot;error&quot;, &quot;MargeTemplate is fail&quot;);
                               return View(&quot;Sample25&quot;, null, result);
                           }
                        }
                        else
                        {
                            result.Add(&quot;error&quot;, &quot;AddDataSource returned empty job id&quot;);
                            return View(&quot;Sample25&quot;, null, result);
                        }
                    }
                    return View(&quot;Sample25&quot;, null, result);
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_602">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_602">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample25&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_603">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_603">&#182;</a>
							</div>
							<h3><i>This sample will show how to use <b>Signer object</b> to be authorized at GroupDocs and how to get GroupDocs user infromation using .NET SDK</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample26()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_604">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_604">&#182;</a>
							</div>
							<p>Check is data posted    </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_605">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_605">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String login = Request.Form[&quot;login&quot;];
                String password = Request.Form[&quot;password&quot;];
                Groupdocs.Api.Contract.UserInfoResult userInfo = null;
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_606">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_606">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (login == null || password == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_607">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_607">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_608">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_608">&#182;</a>
							</div>
							<p>Transfer error message to template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample26&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_609">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_609">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_610">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_610">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_611">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_611">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, &quot;123&quot;, &quot;123&quot;);
</code></pre>
						</td>
					</tr>
					<tr id="section_612">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_612">&#182;</a>
							</div>
							<p>Get info about user account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    userInfo = service.CreateUserLogin(login, password);
</code></pre>
						</td>
					</tr>
					<tr id="section_613">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_613">&#182;</a>
							</div>
							<h3>Put user info to Hashtable</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;FirstName&quot;, userInfo.User.FirstName);
                    result.Add(&quot;LastName&quot;, userInfo.User.LastName);
                    result.Add(&quot;NickName&quot;, userInfo.User.NickName);
                    result.Add(&quot;PrimaryEmail&quot;, userInfo.User.PrimaryEmail);
                    result.Add(&quot;guid&quot;, userInfo.User.Guid);
                    result.Add(&quot;pkey&quot;, userInfo.User.PrivateKey);
</code></pre>
						</td>
					</tr>
					<tr id="section_614">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_614">&#182;</a>
							</div>
							<p>Return Hashtable with results to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    return View(&quot;Sample26&quot;, null, result);
                }
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_615">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_615">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample26&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_616">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_616">&#182;</a>
							</div>
							<h3><i>This sample will show how to create your own questionary using forms and show the result document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample27()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_617">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_617">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_618">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_618">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String url = Request.Form[&quot;url&quot;];
                String name = Request.Form[&quot;name&quot;];
                String sex = Request.Form[&quot;sex&quot;];
                String age = Request.Form[&quot;age&quot;];
                String sunrise = Request.Form[&quot;sunrise&quot;];
                String resultType = Request.Form[&quot;type&quot;];
                String fileGuId = &quot;&quot;;
                var file = Request.Files[&quot;file&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_619">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_619">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;name&quot;, name);
                result.Add(&quot;sex&quot;, sex);
                result.Add(&quot;age&quot;, age);
                result.Add(&quot;sunrise&quot;, sunrise);
                result.Add(&quot;type&quot;, resultType);
                String message = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_620">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_620">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (String.IsNullOrEmpty(userId) || String.IsNullOrEmpty(private_key))
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_621">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_621">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    message = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, message);
                    return View(&quot;Sample27&quot;, null, result);
                }
                else
                {
                    String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_622">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_622">&#182;</a>
							</div>
							<p>Check is base path entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_623">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_623">&#182;</a>
							</div>
							<p>If base path empty set base path to the dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_624">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_624">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_625">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_625">&#182;</a>
							</div>
							<p>Make request to get document pages as images
if URL to web file was provided - upload the file from Web and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (url != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_626">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_626">&#182;</a>
							</div>
							<p>Make request to upload file from entered Url</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        String guid = service.UploadUrl(url);
                        if (guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_627">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_627">&#182;</a>
							</div>
							<p>If file uploaded return his GuId</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = guid;

                        }
</code></pre>
						</td>
					</tr>
					<tr id="section_628">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_628">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        else
                        {
                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample27&quot;, null, result);
                        }
                    }

</code></pre>
						</td>
					</tr>
					<tr id="section_629">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_629">&#182;</a>
							</div>
							<p>if file was uploaded locally - upload the file and get it's GUID</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (file.FileName != &quot;&quot;)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_630">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_630">&#182;</a>
							</div>
							<p>Upload local file </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        Groupdocs.Api.Contract.UploadRequestResult upload = service.UploadFile(file.FileName, &quot;uploaded&quot;, file.InputStream);
                        if (upload.Guid != null)
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_631">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_631">&#182;</a>
							</div>
							<p>If file uploaded return his guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            fileGuId = upload.Guid;
                        }
                        else
                        {
</code></pre>
						</td>
					</tr>
					<tr id="section_632">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_632">&#182;</a>
							</div>
							<p>If file wasn't uploaded return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            result.Add(&quot;error&quot;, &quot;Something wrong with entered data&quot;);
                            return View(&quot;Sample27&quot;, null, result);
                        }
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_633">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_633">&#182;</a>
							</div>
							<p>If user choose file guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!fileId.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_634">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_634">&#182;</a>
							</div>
							<p>Set file guid as entered by user file guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        fileGuId = fileId;
                    }
                    System.Collections.Hashtable enteredData = new System.Collections.Hashtable();
                    enteredData.Add(&quot;sex&quot;, sex);
                    enteredData.Add(&quot;age&quot;, age);
                    enteredData.Add(&quot;sunrise&quot;, sunrise);
                    enteredData.Add(&quot;name&quot;, name);
</code></pre>
						</td>
					</tr>
					<tr id="section_635">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_635">&#182;</a>
							</div>
							<p>Set fileds counter</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Int32 count = enteredData.Count;
</code></pre>
						</td>
					</tr>
					<tr id="section_636">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_636">&#182;</a>
							</div>
							<p>Create Datasource object</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.Datasource dataSource = new Groupdocs.Api.Contract.Datasource();
</code></pre>
						</td>
					</tr>
					<tr id="section_637">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_637">&#182;</a>
							</div>
							<p>Create array of DatasourceField objects</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.DatasourceField[] fieldArray = new Groupdocs.Api.Contract.DatasourceField[count];
</code></pre>
						</td>
					</tr>
					<tr id="section_638">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_638">&#182;</a>
							</div>
							<p>Create array od objects with</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    object[] values = new object[1];
</code></pre>
						</td>
					</tr>
					<tr id="section_639">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_639">&#182;</a>
							</div>
							<p>Set DatasourceFiled data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Int32 counter = 0;
                    foreach (System.Collections.DictionaryEntry fields in enteredData)
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_640">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_640">&#182;</a>
							</div>
							<p>Set object array content</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        values.SetValue(System.Convert.ToString(fields.Value), 0);
                        Groupdocs.Api.Contract.DatasourceField field = new Groupdocs.Api.Contract.DatasourceField();
                        Groupdocs.Api.Contract.DatasourceFieldType type = new Groupdocs.Api.Contract.DatasourceFieldType();
                        type = 0;
                        field.Name = System.Convert.ToString(fields.Key);
                        field.Type = type;
                        field.Values = values;
</code></pre>
						</td>
					</tr>
					<tr id="section_641">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_641">&#182;</a>
							</div>
							<p>Push DatasourceField to array of DatasourceField objects</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        fieldArray.SetValue(field, counter);
                        counter++;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_642">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_642">&#182;</a>
							</div>
							<p>Set feilds array to the Datasource</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    dataSource.Fields = fieldArray;
</code></pre>
						</td>
					</tr>
					<tr id="section_643">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_643">&#182;</a>
							</div>
							<p>Add new Datasource to GroupDocs</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    decimal addDataSource = service.AddDataSource(dataSource);
</code></pre>
						</td>
					</tr>
					<tr id="section_644">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_644">&#182;</a>
							</div>
							<p>Check is not empty addDataSource</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (!addDataSource.Equals(&quot;&quot;))
                    {
</code></pre>
						</td>
					</tr>
					<tr id="section_645">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_645">&#182;</a>
							</div>
							<p>If status ok merge Datasource to new pdf file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        decimal job = service.MergeTemplate(fileGuId, addDataSource, resultType, false);
                        if (!job.Equals(&quot;&quot;))
                        {
                            Groupdocs.Api.Contract.GetJobDocumentsResult jobInfo = new Groupdocs.Api.Contract.GetJobDocumentsResult();
</code></pre>
						</td>
					</tr>
					<tr id="section_646">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_646">&#182;</a>
							</div>
							<h3>Check job status</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            for (int n = 0; n &lt;= 5; n++)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_647">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_647">&#182;</a>
							</div>
							<p>Delay necessary that the inquiry would manage to be processed</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                System.Threading.Thread.Sleep(5000);
</code></pre>
						</td>
					</tr>
					<tr id="section_648">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_648">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                jobInfo = service.GetJobDocuments(job);
</code></pre>
						</td>
					</tr>
					<tr id="section_649">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_649">&#182;</a>
							</div>
							<p>Check job status, if status is Completed or Archived exit from cycle</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                if (jobInfo.JobStatus.Equals(&quot;Completed&quot;) || jobInfo.JobStatus.Equals(&quot;Archived&quot;))
                                {
                                    break;
</code></pre>
						</td>
					</tr>
					<tr id="section_650">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_650">&#182;</a>
							</div>
							<p>If job status Postponed throw exception with error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                }
                                else if (jobInfo.JobStatus.Equals(&quot;Postponed&quot;))
                                {
                                    result.Add(&quot;error&quot;, &quot;Job is fail&quot;);
                                    return View(&quot;Sample27&quot;, null, result);

                                }
                            }
</code></pre>
						</td>
					</tr>
					<tr id="section_651">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_651">&#182;</a>
							</div>
							<p>Get guid</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            String guid = jobInfo.Inputs[0].Outputs[0].Guid;
</code></pre>
						</td>
					</tr>
					<tr id="section_652">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_652">&#182;</a>
							</div>
							<p>Get name</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            String fileName = jobInfo.Inputs[0].Outputs[0].Name;
</code></pre>
						</td>
					</tr>
					<tr id="section_653">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_653">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            String LocalPath = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
                            if (!Directory.Exists(LocalPath))
                            {
                                DirectoryInfo di = Directory.CreateDirectory(LocalPath);
                            }
</code></pre>
						</td>
					</tr>
					<tr id="section_654">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_654">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            bool download = service.DownloadFile(guid, LocalPath + fileName);
</code></pre>
						</td>
					</tr>
					<tr id="section_655">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_655">&#182;</a>
							</div>
							<p>If file downloaded successful</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                            if (download != false)
                            {
</code></pre>
						</td>
					</tr>
					<tr id="section_656">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_656">&#182;</a>
							</div>
							<p>Put file info to the result's list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                result.Add(&quot;message&quot;, &quot;File was converted and downloaded to the &quot; + LocalPath + &quot;/&quot; + fileName);
                                result.Add(&quot;fileId&quot;, guid);
</code></pre>
						</td>
					</tr>
					<tr id="section_657">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_657">&#182;</a>
							</div>
							<p>Return to the template </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                                return View(&quot;Sample27&quot;, null, result);
                            }

                        }
                        else
                        {
                            result.Add(&quot;error&quot;, &quot;MargeTemplate is fail&quot;);
                            return View(&quot;Sample27&quot;, null, result);
                        }
                    }
                    else
                    {
                        result.Add(&quot;error&quot;, &quot;AddDataSource returned empty job id&quot;);
                        return View(&quot;Sample27&quot;, null, result);
                    }                    
                    return View(&quot;Sample27&quot;, null, result);
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_658">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_658">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample27&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_659">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_659">&#182;</a>
							</div>
							<h3><i>This sample will show how to delete all annotations from document</i></h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult Sample28()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_660">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_660">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {
</code></pre>
						</td>
					</tr>
					<tr id="section_661">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_661">&#182;</a>
							</div>
							<h3>Set variables and get POST data</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                System.Collections.Hashtable result = new System.Collections.Hashtable();
                String userId = Request.Form[&quot;client_id&quot;];
                String private_key = Request.Form[&quot;private_key&quot;];
                String fileId = Request.Form[&quot;fileId&quot;];
                String basePath = Request.Form[&quot;server_type&quot;];
</code></pre>
						</td>
					</tr>
					<tr id="section_662">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_662">&#182;</a>
							</div>
							<p>Set entered data to the results list</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                result.Add(&quot;client_id&quot;, userId);
                result.Add(&quot;private_key&quot;, private_key);
                result.Add(&quot;fileId&quot;, fileId);
                String error = null;
</code></pre>
						</td>
					</tr>
					<tr id="section_663">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_663">&#182;</a>
							</div>
							<p>Check is all needed fields are entered</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                if (userId == null || private_key == null || fileId == null)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_664">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_664">&#182;</a>
							</div>
							<p>If not all fields entered send error message</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    error = &quot;Please enter all parameters&quot;;
                    result.Add(&quot;error&quot;, error);
                    return View(&quot;Sample28&quot;, null, result);
                }
                else
                {
                    if (basePath == &quot;&quot;)
                    {
                        basePath = &quot;https://api.groupdocs.com/v2.0&quot;;
                    }
                    result.Add(&quot;basePath&quot;, basePath);
</code></pre>
						</td>
					</tr>
					<tr id="section_665">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_665">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    GroupdocsService service = new GroupdocsService(basePath, userId, private_key);
</code></pre>
						</td>
					</tr>
					<tr id="section_666">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_666">&#182;</a>
							</div>
							<p>Get all annotations from document</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    Groupdocs.Api.Contract.Annotation.ListAnnotationsResult annotations = service.ListAnnotations(fileId);
</code></pre>
						</td>
					</tr>
					<tr id="section_667">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_667">&#182;</a>
							</div>
							<p>If annotations wasn't found return error</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (annotations.Annotations.Length == 0)
                    {

                        error = &quot;File you are entered contains no annotations&quot;;
                        result.Add(&quot;error&quot;, error);
                        return View(&quot;Sample28&quot;, null, result);

                    }
                    Groupdocs.Api.Contract.Annotation.DeleteAnnotationResult delAnnot = null;
                    if (annotations.Annotations.Length != 0)
                    {
                        String message = &quot;All annotations deleted successfully&quot;;
                        result.Add(&quot;message&quot;, message);
</code></pre>
						</td>
					</tr>
					<tr id="section_668">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_668">&#182;</a>
							</div>
							<p>Get annotations data</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                        for (int i = 0; i &lt; annotations.Annotations.Length; i++)
                        {
                            delAnnot = service.DeleteAnnotation(annotations.Annotations[i].Guid);
                       
                        }
                    }
                    String url = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_669">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_669">&#182;</a>
							</div>
							<p>iframe to prodaction server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    if (basePath.Equals(&quot;https://api.groupdocs.com/v2.0&quot;)) {
                        url = &quot;https://apps.groupdocs.com/document-viewer/embed/&quot; + fileId;
</code></pre>
						</td>
					</tr>
					<tr id="section_670">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_670">&#182;</a>
							</div>
							<p>iframe to dev server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    } else if (basePath.Equals(&quot;https://dev-api.groupdocs.com/v2.0&quot;)) {
                        url = &quot;https://dev-apps.groupdocs.com/document-viewer/embed/&quot; + fileId;
</code></pre>
						</td>
					</tr>
					<tr id="section_671">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_671">&#182;</a>
							</div>
							<p>iframe to test server</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    } else if (basePath.Equals(&quot;https://stage-api.groupdocs.com/v2.0&quot;)) {
                        url = &quot;https://stage-apps.groupdocs.com/document-viewer/embed/&quot; + fileId;
                    } else if (basePath.Equals(&quot;http://realtime-api.groupdocs.com&quot;)) {
                        url = &quot;http://realtime-apps.groupdocs.com/document-viewer/embed/&quot; + fileId;
                    }
</code></pre>
						</td>
					</tr>
					<tr id="section_672">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_672">&#182;</a>
							</div>
							<p>Set data for template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    result.Add(&quot;url&quot;, url);
                    return View(&quot;Sample28&quot;, null, result);
                }

            }
</code></pre>
						</td>
					</tr>
					<tr id="section_673">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_673">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                return View(&quot;Sample28&quot;);
            }
        }

</code></pre>
						</td>
					</tr>
					<tr id="section_674">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_674">&#182;</a>
							</div>
							<h3>Callback check for Sample18</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult convert_callback()
        {

            String infoFile = AppDomain.CurrentDomain.BaseDirectory + &quot;user_info.txt&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_675">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_675">&#182;</a>
							</div>
							<p>String fileInfo = AppDomain.CurrentDomain.BaseDirectory + "user_info.txt";</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>
</code></pre>
						</td>
					</tr>
					<tr id="section_676">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_676">&#182;</a>
							</div>
							<p>String userInfo = System.IO.File.ReadLines(infoFile);</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            System.IO.StreamReader userInfoFile = new System.IO.StreamReader(infoFile);
            String userId = userInfoFile.ReadLine();
            String privateKey = userInfoFile.ReadLine();
            userInfoFile.Close();

</code></pre>
						</td>
					</tr>
					<tr id="section_677">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_677">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;)
            {     
                System.IO.StreamReader reader = new System.IO.StreamReader(Request.InputStream);
                String jsonString = reader.ReadToEnd();

                var data = System.Web.Helpers.Json.Decode(jsonString);
               
                String jobId = data.SourceId;
                jobId = jobId.Replace(&quot; &quot;, &quot;&quot;);
                String fileId = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_678">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_678">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                GroupdocsService service = new GroupdocsService(&quot;https://api.groupdocs.com/v2.0&quot;, userId, privateKey);
</code></pre>
						</td>
					</tr>
					<tr id="section_679">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_679">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                Groupdocs.Api.Contract.GetJobDocumentsResult job = service.GetJobDocuments(jobId);
                 String name = &quot;&quot;;
                if (job.Inputs[0].Outputs[0].Guid != &quot;&quot;)
                {
</code></pre>
						</td>
					</tr>
					<tr id="section_680">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_680">&#182;</a>
							</div>
							<p>Return file guid to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                   fileId = job.Inputs[0].Outputs[0].Guid;
                   name = job.Inputs[0].Outputs[0].Name;
                }
                

</code></pre>
						</td>
					</tr>
					<tr id="section_681">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_681">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                String downloadFolder = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;

                if (!Directory.Exists(downloadFolder))
                {
                    DirectoryInfo di = Directory.CreateDirectory(downloadFolder);
                }

</code></pre>
						</td>
					</tr>
					<tr id="section_682">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_682">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                bool file = service.DownloadFile(fileId, downloadFolder + name);

                return View(&quot;convert_callback&quot;);
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_683">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_683">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else
            {
                String jobId = userId + &quot;:&quot; + privateKey;
</code></pre>
						</td>
					</tr>
					<tr id="section_684">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_684">&#182;</a>
							</div>
							<p>String jobId = System.IO.File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "downloads/convert_callback.txt");</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                return View(&quot;convert_callback&quot;, null, jobId);

            }
        }
       
        public String check_file()
        {
</code></pre>
						</td>
					</tr>
					<tr id="section_685">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_685">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                String result = &quot;&quot;;
                byte counter = 0; //counter to not wait forever
                String LocalPath = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
                        do
                        {
                            if (counter &gt;= 10)
                            {
                                result = &quot;Error&quot;;
                                break;
                            }
                            System.Threading.Thread.Sleep(5000);

                            if (!Directory.Exists(LocalPath))
                            {
                                DirectoryInfo di = Directory.CreateDirectory(LocalPath);
                            }
                            string[] filePaths = Directory.GetFiles(LocalPath).Select(Path.GetFileName).ToArray();

                            if (filePaths.Length == 0)
                            {
                                counter++;
                                continue;
                            }
                            else
                            {
                                result = filePaths[0]; //get the name of the fist file in the directory
                                break;
                            }
                           

                        } while (true);

                        if (result.Equals(&quot;Error&quot;)) {
                            return &quot;File was not found. Looks like something went wrong.&quot;; //exit and return error
                        }

</code></pre>
						</td>
					</tr>
					<tr id="section_686">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_686">&#182;</a>
							</div>
							<p>form the link to result file
result = "<a href='/downloads/" + result + "'>Converted file</a>";</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>
                        return result; //return only file name of the result file
            }

</code></pre>
						</td>
					</tr>
					<tr id="section_687">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_687">&#182;</a>
							</div>
							<h3>Callback check for Sample19</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult compare_callback(){
</code></pre>
						</td>
					</tr>
					<tr id="section_688">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_688">&#182;</a>
							</div>
							<p>Get user info</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            String infoFile = AppDomain.CurrentDomain.BaseDirectory + &quot;user_info.txt&quot;;
            System.IO.StreamReader userInfoFile = new System.IO.StreamReader(infoFile);
            String userId = userInfoFile.ReadLine();
            String privateKey = userInfoFile.ReadLine();
            userInfoFile.Close();

</code></pre>
						</td>
					</tr>
					<tr id="section_689">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_689">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;){
                System.IO.StreamReader reader = new System.IO.StreamReader(Request.InputStream);
                String jsonString = reader.ReadToEnd();
                var data = System.Web.Helpers.Json.Decode(jsonString);
                String jobId = data.SourceId;
                jobId = jobId.Replace(&quot; &quot;, &quot;&quot;);
                String fileId = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_690">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_690">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                GroupdocsService service = new GroupdocsService(&quot;https://api.groupdocs.com/v2.0&quot;, userId, privateKey);
</code></pre>
						</td>
					</tr>
					<tr id="section_691">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_691">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                Groupdocs.Api.Contract.GetJobDocumentsResult job = service.GetJobDocuments(jobId);
                String name = &quot;&quot;;
                if (job.Inputs[0].Outputs[0].Guid != &quot;&quot;){
</code></pre>
						</td>
					</tr>
					<tr id="section_692">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_692">&#182;</a>
							</div>
							<p>Return file guid to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    fileId = job.Inputs[0].Outputs[0].Guid;
                    name = job.Inputs[0].Outputs[0].Name;
                }
</code></pre>
						</td>
					</tr>
					<tr id="section_693">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_693">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                String downloadFolder = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
                if (!Directory.Exists(downloadFolder)){
                    DirectoryInfo di = Directory.CreateDirectory(downloadFolder);
                }
</code></pre>
						</td>
					</tr>
					<tr id="section_694">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_694">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                bool file = service.DownloadFile(fileId, downloadFolder + name);
                return View(&quot;compare_callback&quot;);
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_695">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_695">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else{
                String jobId = userId + &quot;:&quot; + privateKey;
                return View(&quot;compare_callback&quot;, null, jobId);
            }
        }
</code></pre>
						</td>
					</tr>
					<tr id="section_696">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_696">&#182;</a>
							</div>
							<h3>Callback check for Sample21</h3>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public ActionResult signature_callback(){
</code></pre>
						</td>
					</tr>
					<tr id="section_697">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_697">&#182;</a>
							</div>
							<p>Get user info</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            String infoFile = AppDomain.CurrentDomain.BaseDirectory + &quot;user_info.txt&quot;;
            System.IO.StreamReader userInfoFile = new System.IO.StreamReader(infoFile);
            String userId = userInfoFile.ReadLine();
            String privateKey = userInfoFile.ReadLine();
            userInfoFile.Close();

</code></pre>
						</td>
					</tr>
					<tr id="section_698">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_698">&#182;</a>
							</div>
							<p>Check is data posted </p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Request.HttpMethod == &quot;POST&quot;){
                System.IO.StreamReader reader = new System.IO.StreamReader(Request.InputStream);
                String jsonString = reader.ReadToEnd();
                var data = System.Web.Helpers.Json.Decode(jsonString);
                String jobId = data.SourceId;
                jobId = jobId.Replace(&quot; &quot;, &quot;&quot;);
                String fileId = &quot;&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_699">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_699">&#182;</a>
							</div>
							<p>Create service for Groupdocs account</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                GroupdocsService service = new GroupdocsService(&quot;https://api.groupdocs.com/v2.0&quot;, userId, privateKey);
</code></pre>
						</td>
					</tr>
					<tr id="section_700">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_700">&#182;</a>
							</div>
							<p>Make request to api for get document info by job id</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                Groupdocs.Api.Contract.GetJobDocumentsResult job = service.GetJobDocuments(jobId);
                String name = &quot;&quot;;
                if (job.Inputs[0].Outputs[0].Guid != &quot;&quot;){
</code></pre>
						</td>
					</tr>
					<tr id="section_701">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_701">&#182;</a>
							</div>
							<p>Return file guid to the template</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                    fileId = job.Inputs[0].Outputs[0].Guid;
                    name = job.Inputs[0].Outputs[0].Name;
                }
</code></pre>
						</td>
					</tr>
					<tr id="section_702">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_702">&#182;</a>
							</div>
							<p>Definition of folder where to download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                String downloadFolder = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
                if (!Directory.Exists(downloadFolder)){
                    DirectoryInfo di = Directory.CreateDirectory(downloadFolder);
                }
</code></pre>
						</td>
					</tr>
					<tr id="section_703">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_703">&#182;</a>
							</div>
							<h3>Make a request to Storage Api for dowloading file</h3>

<p>Download file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>                bool file = service.DownloadFile(fileId, downloadFolder + name);
                return View(&quot;signature_callback&quot;);
            }
</code></pre>
						</td>
					</tr>
					<tr id="section_704">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_704">&#182;</a>
							</div>
							<p>If data not posted return to template for filling of necessary fields</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            else{
                String jobId = userId + &quot;:&quot; + privateKey;
                return View(&quot;signature_callback&quot;, null, jobId);
            }
        }
      
</code></pre>
						</td>
					</tr>
					<tr id="section_705">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_705">&#182;</a>
							</div>
							<p>Method for file downloading from JS</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>        public void download_file() {
            string fileName = Request.QueryString[&quot;FileName&quot;];
            string documentPath = string.Format(&quot;{0}downloads/{1}&quot;, AppDomain.CurrentDomain.BaseDirectory, fileName);

            Response.AddHeader(&quot;Content-disposition&quot;, &quot;attachment; filename=&quot; + fileName);
            Response.ContentType = &quot;application/octet-stream&quot;;
            Response.WriteFile(documentPath);
            Response.End();
        }

        public void create_info_file(String userId, String private_key) {
</code></pre>
						</td>
					</tr>
					<tr id="section_706">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_706">&#182;</a>
							</div>
							<p>path to settings file - temporary save userId and apiKey like to property file</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            String infoFile = AppDomain.CurrentDomain.BaseDirectory + &quot;user_info.txt&quot;;

</code></pre>
						</td>
					</tr>
					<tr id="section_707">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_707">&#182;</a>
							</div>
							<p>open file in rewrite mode</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            FileStream fcreate = System.IO.File.Open(infoFile, FileMode.Create); // will create the file or overwrite it if it already exists
</code></pre>
						</td>
					</tr>
					<tr id="section_708">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_708">&#182;</a>
							</div>
							<p>String filePath = AppDomain.CurrentDomain.BaseDirectory + "user_info.txt";</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            System.IO.StreamWriter infoFileStreamWriter = new StreamWriter(fcreate);
</code></pre>
						</td>
					</tr>
					<tr id="section_709">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_709">&#182;</a>
							</div>
							<p>w = System.IO.File.CreateText(filePath);</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            infoFileStreamWriter.WriteLine(userId); //save userId
            infoFileStreamWriter.WriteLine(private_key); //save privateKey
            infoFileStreamWriter.Flush();
            infoFileStreamWriter.Close();

            String downloadFolder = AppDomain.CurrentDomain.BaseDirectory + &quot;downloads/&quot;;
</code></pre>
						</td>
					</tr>
					<tr id="section_710">
						<td class="docs">
							<div class="pilwrap">
								<a class="pilcrow" href="#section_710">&#182;</a>
							</div>
							<p>check if Downloads folder exists and remove it to clean all old files</p>

						</td>
						<td class="code">
							<pre><code class='prettyprint'>            if (Directory.Exists(downloadFolder)){
                Directory.Delete(downloadFolder, true);
            }
        }
    }
}
</code></pre>
						</td>
					</tr>
			</tbody>
		</table>
	</div>
</body>
</html>
